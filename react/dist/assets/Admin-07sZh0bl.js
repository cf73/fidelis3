import{r as i,j as e,g as D,i as R,n as E,e as T,S as A,C as H,H as I,h as L,l as M,W as Y,X as $,k as U,Y as F,Z as B,_ as O}from"./index-BMdrBsqe.js";const W=({product:r,onSave:y,onCancel:_})=>{const[o,k]=i.useState({title:r.title||"",content:r.content||"",specs:r.specs||"",price:r.price||0,show_price:r.show_price??!0,available_for_demo:r.available_for_demo??!0,available_to_buy_online:r.available_to_buy_online??!0,published:r.published??!0,pairs_well_with:r.pairs_well_with||[],also_consider:r.also_consider||[]}),[u,d]=i.useState([]),[h,f]=i.useState([]),[C,j]=i.useState([]),[b,p]=i.useState(!1),[c,g]=i.useState("basic");i.useEffect(()=>{if(r.reivews_set){if(Array.isArray(r.reivews_set))d(r.reivews_set);else if(typeof r.reivews_set=="string")try{const t=JSON.parse(r.reivews_set);d(Array.isArray(t)?t:[])}catch{d([])}}},[r.reivews_set]),i.useEffect(()=>{(async()=>{const[a,n]=await Promise.all([D(),R()]);f(a),j(n)})()},[]);const l=(t,a)=>{k(n=>({...n,[t]:a}))},v=()=>{const t={excerpt:"",attribution:"",link:"",date_of_review:new Date().toISOString().split("T")[0]};d(a=>[...a,t])},m=(t,a,n)=>{d(s=>s.map((x,w)=>w===t?{...x,[a]:n}:x))},N=t=>{d(a=>a.filter((n,s)=>s!==t))},P=async()=>{p(!0);try{const t={...o,reivews_set:u};await E(r.id,t),y()}catch(t){console.error("Error saving product:",t)}finally{p(!1)}},S=[{id:"basic",label:"Basic Info",icon:"ðŸ“‹"},{id:"description",label:"Description",icon:"ðŸ“"},{id:"specs",label:"Specifications",icon:"âš™ï¸"},{id:"reviews",label:"Reviews",icon:"â­"},{id:"relationships",label:"Relationships",icon:"ðŸ”—"}];return e.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-stone-200 overflow-hidden",children:[e.jsx("div",{className:"border-b border-stone-200 bg-gradient-to-r from-stone-50 to-stone-100",children:e.jsx("nav",{className:"flex","aria-label":"Tabs",children:S.map(t=>e.jsxs("button",{onClick:()=>g(t.id),className:`flex-1 flex items-center justify-center space-x-2 py-4 px-4 font-medium text-sm transition-all duration-300 ${c===t.id?"text-stone-900 bg-white border-b-2 border-stone-900 shadow-sm":"text-stone-600 hover:text-stone-800 hover:bg-stone-50"}`,children:[e.jsx("span",{children:t.icon}),e.jsx("span",{children:t.label})]},t.id))})}),e.jsxs("div",{className:"p-8 lg:p-12",children:[c==="basic"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-2",children:"Product Title"}),e.jsx("input",{type:"text",value:o.title,onChange:t=>l("title",t.target.value),className:"w-full border border-stone-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-stone-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-2",children:"Price"}),e.jsx("input",{type:"number",value:o.price,onChange:t=>l("price",parseInt(t.target.value)||0),className:"w-full border border-stone-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-stone-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-2",children:"Category"}),e.jsx("div",{className:"text-sm text-stone-600 py-3",children:r.categories?.name||"No category assigned"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-2",children:"Manufacturer"}),e.jsx("div",{className:"text-sm text-stone-600 py-3",children:r.manufacturer?.name||"No manufacturer assigned"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:o.show_price,onChange:t=>l("show_price",t.target.checked),className:"rounded border-stone-300 text-stone-600 focus:ring-stone-500"}),e.jsx("span",{className:"text-sm font-medium text-stone-700",children:"Show Price"})]}),e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:o.available_for_demo,onChange:t=>l("available_for_demo",t.target.checked),className:"rounded border-stone-300 text-stone-600 focus:ring-stone-500"}),e.jsx("span",{className:"text-sm font-medium text-stone-700",children:"Available for Demo"})]}),e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:o.available_to_buy_online,onChange:t=>l("available_to_buy_online",t.target.checked),className:"rounded border-stone-300 text-stone-600 focus:ring-stone-500"}),e.jsx("span",{className:"text-sm font-medium text-stone-700",children:"Available Online"})]})]}),e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:o.published,onChange:t=>l("published",t.target.checked),className:"rounded border-stone-300 text-stone-600 focus:ring-stone-500"}),e.jsx("span",{className:"text-sm font-medium text-stone-700",children:"Published"})]})]}),c==="description"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-2",children:"Product Description"}),e.jsx("textarea",{value:o.content,onChange:t=>l("content",t.target.value),rows:12,className:"w-full border border-stone-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-stone-500 focus:border-transparent",placeholder:"Enter the product description. You can use HTML tags for formatting."}),e.jsx("p",{className:"text-sm text-stone-500 mt-2",children:"You can use HTML tags like <p>, <h2>, <h3>, <strong>, <em>, <ul>, <li> for formatting."})]}),c==="specs"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-2",children:"Technical Specifications"}),e.jsx("textarea",{value:o.specs,onChange:t=>l("specs",t.target.value),rows:12,className:"w-full border border-stone-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-stone-500 focus:border-transparent",placeholder:"Enter the technical specifications. You can use HTML tags for formatting."}),e.jsx("p",{className:"text-sm text-stone-500 mt-2",children:"You can use HTML tags like <p>, <h2>, <h3>, <strong>, <em>, <ul>, <li> for formatting."})]}),c==="reviews"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-medium text-stone-900",children:"Product Reviews"}),e.jsx("button",{onClick:v,className:"inline-flex items-center px-4 py-2 bg-stone-800 text-white rounded-lg hover:bg-stone-900 transition-colors duration-200 text-sm font-medium",children:e.jsx("span",{children:"Add Review"})})]}),u.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-stone-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-2xl",children:"â­"})}),e.jsx("h3",{className:"text-xl font-medium text-stone-900 mb-2",children:"No Reviews Yet"}),e.jsx("p",{className:"text-stone-600",children:"Add the first review for this product."})]}):e.jsx("div",{className:"space-y-6",children:u.map((t,a)=>e.jsxs("div",{className:"border border-stone-200 rounded-xl p-6 bg-stone-50",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("h4",{className:"text-lg font-medium text-stone-900",children:["Review ",a+1]}),e.jsx("button",{onClick:()=>N(a),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Remove"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-2",children:"Attribution"}),e.jsx("input",{type:"text",value:t.attribution||"",onChange:n=>m(a,"attribution",n.target.value),className:"w-full border border-stone-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-stone-500 focus:border-transparent",placeholder:"Reviewer name or publication"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-2",children:"Date"}),e.jsx("input",{type:"date",value:t.date_of_review||"",onChange:n=>m(a,"date_of_review",n.target.value),className:"w-full border border-stone-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-stone-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-2",children:"Review Link (Optional)"}),e.jsx("input",{type:"url",value:t.link||"",onChange:n=>m(a,"link",n.target.value),className:"w-full border border-stone-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-stone-500 focus:border-transparent",placeholder:"https://..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-2",children:"Review Excerpt"}),e.jsx("textarea",{value:t.excerpt||"",onChange:n=>m(a,"excerpt",n.target.value),rows:6,className:"w-full border border-stone-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-stone-500 focus:border-transparent",placeholder:"Enter the review excerpt. You can use HTML tags for formatting."}),e.jsx("p",{className:"text-sm text-stone-500 mt-2",children:"You can use HTML tags like <p>, <strong>, <em> for formatting."})]})]},a))})]}),c==="relationships"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h3",{className:"text-2xl font-light text-stone-900 mb-2",children:"Product Relationships"}),e.jsx("p",{className:"text-stone-600",children:"Manage which products this item pairs well with and alternatives to consider."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-stone-50 rounded-2xl p-6 border border-stone-200",children:[e.jsx("h4",{className:"text-lg font-medium text-stone-900 mb-4",children:"Pairs Well With"}),e.jsx("p",{className:"text-sm text-stone-600 mb-4",children:"Choose products from other categories that work well with this item."}),e.jsxs("div",{className:"space-y-3",children:[o.pairs_well_with.map((t,a)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"text",value:t,onChange:n=>{const s=[...o.pairs_well_with];s[a]=n.target.value,l("pairs_well_with",s)},className:"flex-1 border border-stone-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-stone-500 focus:border-transparent",placeholder:"Product ID"}),e.jsx("button",{onClick:()=>{const n=o.pairs_well_with.filter((s,x)=>x!==a);l("pairs_well_with",n)},className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Remove"})]},a)),e.jsx("button",{onClick:()=>{const t=[...o.pairs_well_with,""];l("pairs_well_with",t)},className:"w-full px-4 py-2 border border-stone-300 text-stone-700 rounded-lg hover:bg-stone-100 transition-colors duration-200 text-sm font-medium",children:"Add Product ID"})]})]}),e.jsxs("div",{className:"bg-stone-50 rounded-2xl p-6 border border-stone-200",children:[e.jsx("h4",{className:"text-lg font-medium text-stone-900 mb-4",children:"Also Consider"}),e.jsx("p",{className:"text-sm text-stone-600 mb-4",children:"Choose alternative products in the same category and price range."}),e.jsxs("div",{className:"space-y-3",children:[o.also_consider.map((t,a)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"text",value:t,onChange:n=>{const s=[...o.also_consider];s[a]=n.target.value,l("also_consider",s)},className:"flex-1 border border-stone-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-stone-500 focus:border-transparent",placeholder:"Product ID"}),e.jsx("button",{onClick:()=>{const n=o.also_consider.filter((s,x)=>x!==a);l("also_consider",n)},className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Remove"})]},a)),e.jsx("button",{onClick:()=>{const t=[...o.also_consider,""];l("also_consider",t)},className:"w-full px-4 py-2 border border-stone-300 text-stone-700 rounded-lg hover:bg-stone-100 transition-colors duration-200 text-sm font-medium",children:"Add Product ID"})]})]})]})]})]}),e.jsxs("div",{className:"border-t border-stone-200 bg-stone-50 px-8 py-6 flex justify-end space-x-4",children:[e.jsx("button",{onClick:_,className:"px-6 py-3 border border-stone-300 text-stone-700 rounded-lg hover:bg-stone-100 transition-colors duration-200 font-medium",children:"Cancel"}),e.jsx("button",{onClick:P,disabled:b,className:"px-6 py-3 bg-stone-800 text-white rounded-lg hover:bg-stone-900 transition-colors duration-200 font-medium disabled:opacity-50",children:b?"Saving...":"Save Changes"})]})]})},G=()=>{const{user:r}=T(),[y,_]=i.useState([]),[o,k]=i.useState([]),[u,d]=i.useState(!1),[h,f]=i.useState(null),[C,j]=i.useState(""),[b,p]=i.useState(""),[c,g]=i.useState(null),[l,v]=i.useState("hero"),m=async()=>{const s=await Y();_(s)},N=async()=>{const s=await $();k(s)};i.useEffect(()=>{m(),N()},[]);const P=async()=>{if(h){d(!0);try{const s=`${Date.now()}-${h.name}`,{error:x}=await U(h,s);if(x)throw x;const{error:w}=await F({image:s,alt_text:C||null,credit:b||null,published:!0});if(w)throw w;f(null),j(""),p(""),await m()}catch(s){console.error("Upload failed",s)}finally{d(!1)}}},S=async s=>{await B(s.id,{published:!s.published}),await m()},t=async s=>{await O(s),await m()},a=()=>{g(null),N()},n=()=>{g(null)};return r?c?e.jsx(A,{variant:"default",background:"white",children:e.jsxs(H,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:n,className:"inline-flex items-center space-x-2 text-stone-600 hover:text-stone-800 mb-4",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),e.jsx("span",{children:"Back to Admin"})]}),e.jsxs(I,{children:["Edit Product: ",c.title]})]}),e.jsx(W,{product:c,onSave:a,onCancel:n})]})}):e.jsx(A,{variant:"default",background:"white",children:e.jsxs(H,{children:[e.jsx(I,{className:"mb-6",children:"Admin"}),e.jsx("div",{className:"border-b border-stone-200 mb-8",children:e.jsxs("nav",{className:"flex space-x-8",children:[e.jsx("button",{onClick:()=>v("hero"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${l==="hero"?"border-stone-900 text-stone-900":"border-transparent text-stone-500 hover:text-stone-700 hover:border-stone-300"}`,children:"Hero Images"}),e.jsx("button",{onClick:()=>v("products"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${l==="products"?"border-stone-900 text-stone-900":"border-transparent text-stone-500 hover:text-stone-700 hover:border-stone-300"}`,children:"Products"})]})}),l==="hero"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-10 p-6 border rounded-xl",children:[e.jsx("h2",{className:"text-xl font-medium mb-4",children:"Upload Hero Image"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-stone-600 mb-2",children:"File"}),e.jsx("input",{type:"file",accept:"image/*",onChange:s=>f(s.target.files?.[0]||null)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-stone-600 mb-2",children:"Alt text"}),e.jsx("input",{className:"w-full border rounded-md px-3 py-2",value:C,onChange:s=>j(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-stone-600 mb-2",children:"Credit"}),e.jsx("input",{className:"w-full border rounded-md px-3 py-2",value:b,onChange:s=>p(s.target.value)})]}),e.jsx("div",{children:e.jsx("button",{onClick:P,disabled:u||!h,className:"btn-primary disabled:opacity-50",children:u?"Uploadingâ€¦":"Upload"})})]})]}),e.jsx("h2",{className:"text-xl font-medium mb-4",children:"Home Hero Images"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:y.map(s=>e.jsxs("div",{className:"border rounded-xl overflow-hidden",children:[e.jsx("div",{className:"aspect-[16/9] bg-stone-100",children:s.image&&e.jsx("img",{src:M(s.image),alt:s.alt_text||"",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsx("div",{className:"text-sm text-stone-700 line-clamp-1",children:s.alt_text}),e.jsx("div",{className:"text-xs text-stone-500 line-clamp-1",children:s.credit}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>S(s),className:"btn-secondary",children:s.published?"Unpublish":"Publish"}),e.jsx("button",{onClick:()=>t(s.id),className:"btn-secondary",children:"Delete"})]})]})]},s.id))})]}),l==="products"&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-xl font-medium mb-4",children:"Product Management"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(s=>e.jsxs("div",{className:"border rounded-xl overflow-hidden bg-white shadow-sm",children:[e.jsx("div",{className:"aspect-[16/9] bg-stone-100",children:s.product_hero_image&&e.jsx("img",{src:`https://myrdvcihcqphixvunvkv.supabase.co/storage/v1/object/public/images/${s.product_hero_image}`,alt:s.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-stone-900 line-clamp-2",children:s.title}),e.jsxs("p",{className:"text-sm text-stone-500",children:[s.manufacturer?.name," â€¢ ",s.categories?.name]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.published?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:s.published?"Published":"Draft"}),s.show_price&&s.price&&e.jsxs("span",{className:"text-stone-700 font-medium",children:["$",s.price.toLocaleString()]})]}),e.jsx("div",{className:"flex gap-2 pt-2",children:e.jsx("button",{onClick:()=>g(s),className:"flex-1 btn-primary text-sm",children:"Edit"})})]})]},s.id))})]})]})}):e.jsx(A,{variant:"default",background:"white",children:e.jsxs(H,{children:[e.jsx(I,{className:"mb-4",children:"Admin"}),e.jsx(L,{children:"Please sign in to access the admin tools."})]})})};export{G as default};
//# sourceMappingURL=Admin-07sZh0bl.js.map
