{"version":3,"file":"News-DY5-KSy_.js","sources":["../../src/lib/utils.ts","../../src/pages/News.tsx"],"sourcesContent":["/**\r\n * Parse Statamic content format to extract plain text\r\n * Handles JSON arrays with content blocks from Statamic CMS\r\n */\r\nexport const parseStatamicContent = (content: string): string => {\r\n  if (!content) return '';\r\n  \r\n  try {\r\n    // Check if it's JSON format from Statamic\r\n    if (content.startsWith('[') || content.startsWith('{')) {\r\n      const parsed = JSON.parse(content);\r\n      if (Array.isArray(parsed)) {\r\n        // Extract text from Statamic content blocks\r\n        return parsed\r\n          .map((block: any) => {\r\n            if (block.type === 'paragraph' && block.content) {\r\n              return block.content\r\n                .map((item: any) => item.text || '')\r\n                .join('');\r\n            }\r\n            return '';\r\n          })\r\n          .join('\\n')\r\n          .trim();\r\n      }\r\n    }\r\n    return content;\r\n  } catch {\r\n    // If parsing fails, return the original content\r\n    return content;\r\n  }\r\n};\r\n\r\n/**\r\n * Convert a string to a URL-friendly slug\r\n */\r\nexport const slugify = (text: string): string => {\r\n  return text\r\n    .toLowerCase()\r\n    .replace(/[^\\w\\s-]/g, '') // Remove special characters\r\n    .replace(/[\\s_-]+/g, '-') // Replace spaces and underscores with hyphens\r\n    .replace(/^-+|-+$/g, ''); // Remove leading/trailing hyphens\r\n};\r\n\r\n/**\r\n * Format price with proper currency display\r\n */\r\nexport const formatPrice = (price: number): string => {\r\n  return new Intl.NumberFormat('en-US', {\r\n    style: 'currency',\r\n    currency: 'USD',\r\n  }).format(price);\r\n}; ","import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { motion } from 'framer-motion';\r\nimport { getNews, getImageUrl, News as NewsType } from '../lib/supabase';\r\nimport { slugify } from '../lib/utils';\r\nimport { Section, Container, Flex, H1, BodyLarge } from '../components/ui';\r\nimport { NewsCard } from '../components/ui';\r\nimport { getRandomMusicalMessage } from '../utils/musicalLoadingMessages';\r\n\r\nconst News: React.FC = () => {\r\n  const [news, setNews] = useState<NewsType[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchNews = async () => {\r\n      try {\r\n        const data = await getNews();\r\n        setNews(data);\r\n      } catch (error) {\r\n        console.error('Error fetching news:', error);\r\n        setNews([]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchNews();\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-warm-white flex items-center justify-center\">\r\n        <Container size=\"6xl\">\r\n          <div className=\"text-center\">\r\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-stone-600 mx-auto\"></div>\r\n            <p className=\"mt-4 text-stone-600\">{getRandomMusicalMessage()}</p>\r\n          </div>\r\n        </Container>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0 }}\r\n      animate={{ opacity: 1 }}\r\n      transition={{ duration: 0.5 }}\r\n      className=\"min-h-screen bg-warm-white\"\r\n    >\r\n      {/* Hero Section */}\r\n      <Section variant=\"hero\" background=\"custom\" customBackground=\"bg-warm-beige\" className=\"-mt-4\">\r\n        <Container size=\"6xl\">\r\n          <div className=\"max-w-4xl\">\r\n            <h1 className=\"text-4xl lg:text-5xl xl:text-6xl font-light text-stone-900 leading-tight tracking-wide mb-6\">News & Updates</h1>\r\n            <div className=\"prose prose-stone prose-lg max-w-none text-stone-700 leading-relaxed\">\r\n              <p>\r\n                New gear arrivals, listening events, and insights from decades in high-end audio. We share what we think mattersâ€”no fluff, just what's worth your time.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </Container>\r\n      </Section>\r\n\r\n      {/* Two Column Layout: News Grid + Newsletter */}\r\n      <Section variant=\"default\" background=\"custom\" customBackground=\"bg-[#fffcf9]\">\r\n        <Container size=\"6xl\">\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-12\">\r\n            {/* Main News Grid - Takes up 2/3 of the space */}\r\n            <div className=\"lg:col-span-2\">\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\r\n                {news.map((article) => {\r\n                  const articleSlug = article.slug || slugify(article.title);\r\n                  return (\r\n                    <Link key={article.id} to={`/news/${articleSlug}`} className=\"block h-full\">\r\n                      <NewsCard article={article} className=\"h-full\" />\r\n                    </Link>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Newsletter Signup Sidebar - Takes up 1/3 of the space */}\r\n            <div className=\"lg:col-span-1\">\r\n              <div className=\"sticky top-32\">\r\n                <div className=\"bg-warm-white rounded-xl p-6 border border-amber-200/30\">\r\n                  <div className=\"flex items-center mb-4\">\r\n                    <div className=\"bg-warm-white pr-4\">\r\n                      <span className=\"text-sm font-medium text-stone-700 tracking-wider uppercase\">Stay Updated</span>\r\n                    </div>\r\n                    <div className=\"flex-grow border-t border-stone-300\"></div>\r\n                  </div>\r\n                  <p className=\"text-stone-600 text-sm leading-relaxed mb-6\">\r\n                    Get updates when we receive new shipments, host listening sessions, or have insights worth sharing.\r\n                  </p>\r\n                  <div className=\"space-y-3\">\r\n                    <input\r\n                      type=\"email\"\r\n                      placeholder=\"Enter your email\"\r\n                      className=\"w-full px-4 py-3 bg-white border border-stone-300 rounded-lg text-stone-900 placeholder-stone-500 focus:outline-none focus:ring-2 focus:ring-stone-500 focus:border-stone-500 transition-all duration-300\"\r\n                    />\r\n                    <button className=\"w-full px-6 py-3 bg-stone-900 hover:bg-stone-800 text-white font-medium rounded-lg transition-all duration-300\">\r\n                      Keep Me Posted\r\n                    </button>\r\n                  </div>\r\n                  <p className=\"text-xs text-stone-500 mt-3\">\r\n                    We respect your privacy. Unsubscribe anytime.\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </Container>\r\n      </Section>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport { News }; "],"names":["slugify","text","News","news","setNews","useState","loading","setLoading","useEffect","data","getNews","error","jsx","Container","jsxs","motion","Section","article","articleSlug","Link","NewsCard"],"mappings":"wIAoCO,MAAMA,EAAWC,GACfA,EACJ,YAAA,EACA,QAAQ,YAAa,EAAE,EACvB,QAAQ,WAAY,GAAG,EACvB,QAAQ,WAAY,EAAE,EChCrBC,EAAiB,IAAM,CAC3B,KAAM,CAACC,EAAMC,CAAO,EAAIC,EAAAA,SAAqB,CAAA,CAAE,EACzC,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EAiB3C,OAfAG,EAAAA,UAAU,IAAM,EACI,SAAY,CAC5B,GAAI,CACF,MAAMC,EAAO,MAAMC,EAAA,EACnBN,EAAQK,CAAI,CACd,OAASE,EAAO,CACd,QAAQ,MAAM,uBAAwBA,CAAK,EAC3CP,EAAQ,CAAA,CAAE,CACZ,QAAA,CACEG,EAAW,EAAK,CAClB,CACF,GACA,CACF,EAAG,CAAA,CAAE,EAEDD,EAEAM,EAAAA,IAAC,MAAA,CAAI,UAAU,8DACb,SAAAA,EAAAA,IAACC,EAAA,CAAU,KAAK,MACd,SAAAC,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAF,EAAAA,IAAC,MAAA,CAAI,UAAU,yEAAA,CAA0E,EACzFA,EAAAA,IAAC,IAAA,CAAE,UAAU,sBAAuB,YAAwB,CAAE,CAAA,CAAA,CAChE,EACF,EACF,EAKFE,EAAAA,KAACC,EAAO,IAAP,CACC,QAAS,CAAE,QAAS,CAAA,EACpB,QAAS,CAAE,QAAS,CAAA,EACpB,WAAY,CAAE,SAAU,EAAA,EACxB,UAAU,6BAGV,SAAA,CAAAH,EAAAA,IAACI,GAAQ,QAAQ,OAAO,WAAW,SAAS,iBAAiB,gBAAgB,UAAU,QACrF,SAAAJ,EAAAA,IAACC,GAAU,KAAK,MACd,SAAAC,OAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAF,EAAAA,IAAC,KAAA,CAAG,UAAU,8FAA8F,SAAA,iBAAc,QACzH,MAAA,CAAI,UAAU,uEACb,SAAAA,EAAAA,IAAC,IAAA,CAAE,mKAEH,CAAA,CACF,CAAA,CAAA,CACF,EACF,EACF,EAGAA,MAACI,EAAA,CAAQ,QAAQ,UAAU,WAAW,SAAS,iBAAiB,eAC9D,SAAAJ,EAAAA,IAACC,GAAU,KAAK,MACd,SAAAC,EAAAA,KAAC,MAAA,CAAI,UAAU,yCAEb,SAAA,CAAAF,EAAAA,IAAC,MAAA,CAAI,UAAU,gBACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,wCACZ,SAAAT,EAAK,IAAKc,GAAY,CACrB,MAAMC,EAAcD,EAAQ,MAAQjB,EAAQiB,EAAQ,KAAK,EACzD,OACEL,EAAAA,IAACO,EAAA,CAAsB,GAAI,SAASD,CAAW,GAAI,UAAU,eAC3D,SAAAN,MAACQ,GAAS,QAAAH,EAAkB,UAAU,SAAS,CAAA,EADtCA,EAAQ,EAEnB,CAEJ,CAAC,EACH,EACF,EAGAL,EAAAA,IAAC,MAAA,CAAI,UAAU,gBACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,gBACb,SAAAE,OAAC,MAAA,CAAI,UAAU,0DACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,yBACb,SAAA,CAAAF,EAAAA,IAAC,MAAA,CAAI,UAAU,qBACb,SAAAA,EAAAA,IAAC,QAAK,UAAU,8DAA8D,wBAAY,CAAA,CAC5F,EACAA,EAAAA,IAAC,MAAA,CAAI,UAAU,qCAAA,CAAsC,CAAA,EACvD,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,8CAA8C,SAAA,sGAE3D,EACAE,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAAF,EAAAA,IAAC,QAAA,CACC,KAAK,QACL,YAAY,mBACZ,UAAU,2MAAA,CAAA,EAEZA,EAAAA,IAAC,SAAA,CAAO,UAAU,iHAAiH,SAAA,gBAAA,CAEnI,CAAA,EACF,EACAA,EAAAA,IAAC,IAAA,CAAE,UAAU,8BAA8B,SAAA,+CAAA,CAE3C,CAAA,CAAA,CACF,EACF,CAAA,CACF,CAAA,CAAA,CACF,EACF,CAAA,CACF,CAAA,CAAA,CAAA,CAGN"}