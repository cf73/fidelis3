{"version":3,"file":"ProductCategories-C5cKmCPZ.js","sources":["../../src/pages/ProductCategories.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport { getProductCategories, getProductsWithCategories, getImageUrl } from '../lib/supabase';\r\nimport { ProductCategory, Product } from '../lib/supabase';\r\nimport { Section, Container, Flex, H1, BodyLarge, CategoryCard } from '../components/ui';\r\n\r\ninterface CategoryWithHero extends ProductCategory {\r\n  heroImage?: string;\r\n  productCount?: number;\r\n}\r\n\r\nexport const ProductCategories: React.FC = () => {\r\n  const [categories, setCategories] = useState<CategoryWithHero[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const location = useLocation();\r\n\r\n  useEffect(() => {\r\n    const loadCategories = async () => {\r\n      try {\r\n        const [categoriesData, productsData] = await Promise.all([\r\n          getProductCategories(),\r\n          getProductsWithCategories(),\r\n        ]);\r\n\r\n        // Enhance categories with hero images and product counts\r\n        const enhancedCategories = categoriesData.map(category => {\r\n          const categoryProducts = productsData.filter(product => \r\n            product.categories?.id === category.id\r\n          );\r\n          \r\n          // Get the first product with a hero image for this category\r\n          const heroProduct = categoryProducts.find(product => \r\n            product.product_hero_image\r\n          );\r\n\r\n          return {\r\n            ...category,\r\n            heroImage: heroProduct?.product_hero_image,\r\n            productCount: categoryProducts.length\r\n          };\r\n        });\r\n\r\n        setCategories(enhancedCategories);\r\n      } catch (error) {\r\n        console.error('Error loading categories:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadCategories();\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-[#fffcf9] flex items-center justify-center\">\r\n        <Container>\r\n          <div className=\"text-center\">\r\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-stone-600 mx-auto\"></div>\r\n            <p className=\"mt-4 text-stone-600\">Loading categories...</p>\r\n          </div>\r\n        </Container>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-[#fffcf9]\">\r\n      {/* Hero Section */}\r\n      <Section variant=\"hero\" background=\"white\">\r\n        <Container>\r\n          <Flex direction=\"col\" align=\"center\" className=\"text-center\">\r\n            <H1 className=\"mb-6\">Product Categories</H1>\r\n          </Flex>\r\n        </Container>\r\n      </Section>\r\n\r\n      {/* Categories Grid - refined layout */}\r\n      <Section variant=\"default\" background=\"custom\" customBackground=\"bg-[#fffcf9]\">\r\n        <Container>\r\n\r\n\r\n          <div className=\"grid gap-x-6 gap-y-10 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4\">\r\n            {categories.map((category) => (\r\n              <Link\r\n                key={category.id}\r\n                to={`/products/list?category=${category.id}`}\r\n                className=\"block h-full\"\r\n              >\r\n                <CategoryCard category={category} className=\"h-full\" />\r\n              </Link>\r\n            ))}\r\n          </div>\r\n\r\n          {/* View All Products Link */}\r\n          <div className=\"mt-16 text-center\">\r\n            <Link\r\n              to=\"/products/list\"\r\n              className=\"inline-flex items-center px-8 py-4 bg-stone-800 hover:bg-stone-700 text-white font-medium rounded-xl transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-stone-500 shadow-sm hover:shadow-md\"\r\n            >\r\n              <svg className=\"w-6 h-6 mr-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 6h16M4 10h16M4 14h16M4 18h16\" />\r\n              </svg>\r\n              View All Products\r\n            </Link>\r\n          </div>\r\n        </Container>\r\n      </Section>\r\n    </div>\r\n  );\r\n}; "],"names":["ProductCategories","categories","setCategories","useState","loading","setLoading","useLocation","useEffect","categoriesData","productsData","getProductCategories","getProductsWithCategories","enhancedCategories","category","categoryProducts","product","heroProduct","error","jsx","Container","jsxs","Section","Flex","H1","Link","CategoryCard"],"mappings":"8GAWO,MAAMA,EAA8B,IAAM,CAC/C,KAAM,CAACC,EAAYC,CAAa,EAAIC,EAAAA,SAA6B,CAAA,CAAE,EAC7D,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EAwC3C,OAvCiBG,EAAA,EAEjBC,EAAAA,UAAU,IAAM,EACS,SAAY,CACjC,GAAI,CACF,KAAM,CAACC,EAAgBC,CAAY,EAAI,MAAM,QAAQ,IAAI,CACvDC,EAAA,EACAC,EAAA,CAA0B,CAC3B,EAGKC,EAAqBJ,EAAe,IAAIK,GAAY,CACxD,MAAMC,EAAmBL,EAAa,OAAOM,GAC3CA,EAAQ,YAAY,KAAOF,EAAS,EAAA,EAIhCG,EAAcF,EAAiB,QACnCC,EAAQ,kBAAA,EAGV,MAAO,CACL,GAAGF,EACH,UAAWG,GAAa,mBACxB,aAAcF,EAAiB,MAAA,CAEnC,CAAC,EAEDZ,EAAcU,CAAkB,CAClC,OAASK,EAAO,CACd,QAAQ,MAAM,4BAA6BA,CAAK,CAClD,QAAA,CACEZ,EAAW,EAAK,CAClB,CACF,GAEA,CACF,EAAG,CAAA,CAAE,EAEDD,EAEAc,EAAAA,IAAC,OAAI,UAAU,6DACb,eAACC,EAAA,CACC,SAAAC,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAF,EAAAA,IAAC,MAAA,CAAI,UAAU,yEAAA,CAA0E,EACzFA,EAAAA,IAAC,IAAA,CAAE,UAAU,sBAAsB,SAAA,uBAAA,CAAqB,CAAA,CAAA,CAC1D,EACF,EACF,EAKFE,EAAAA,KAAC,MAAA,CAAI,UAAU,4BAEb,SAAA,CAAAF,EAAAA,IAACG,EAAA,CAAQ,QAAQ,OAAO,WAAW,QACjC,SAAAH,EAAAA,IAACC,EAAA,CACC,SAAAD,EAAAA,IAACI,EAAA,CAAK,UAAU,MAAM,MAAM,SAAS,UAAU,cAC7C,SAAAJ,EAAAA,IAACK,EAAA,CAAG,UAAU,OAAO,SAAA,oBAAA,CAAkB,CAAA,CACzC,CAAA,CACF,CAAA,CACF,EAGAL,EAAAA,IAACG,GAAQ,QAAQ,UAAU,WAAW,SAAS,iBAAiB,eAC9D,SAAAD,EAAAA,KAACD,EAAA,CAGC,SAAA,CAAAD,MAAC,OAAI,UAAU,qEACZ,SAAAjB,EAAW,IAAKY,GACfK,EAAAA,IAACM,EAAA,CAEC,GAAI,2BAA2BX,EAAS,EAAE,GAC1C,UAAU,eAEV,SAAAK,EAAAA,IAACO,EAAA,CAAa,SAAAZ,EAAoB,UAAU,QAAA,CAAS,CAAA,EAJhDA,EAAS,EAAA,CAMjB,EACH,EAGAK,EAAAA,IAAC,MAAA,CAAI,UAAU,oBACb,SAAAE,EAAAA,KAACI,EAAA,CACC,GAAG,iBACH,UAAU,sOAEV,SAAA,CAAAN,EAAAA,IAAC,OAAI,UAAU,eAAe,KAAK,OAAO,OAAO,eAAe,QAAQ,YACtE,eAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,kCAAkC,CAAA,CACzG,EAAM,mBAAA,CAAA,CAAA,CAER,CACF,CAAA,CAAA,CACF,CAAA,CACF,CAAA,EACF,CAEJ"}