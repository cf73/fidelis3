import{c as U,d as V,u as q,r as n,e as G,j as e,S as C,C as S,L as H,B as M,P as O,b as Y,g as _,f as J}from"./index-sDBu8FS9.js";import{H as K,B as Q}from"./Typography-DZld3_jF.js";import{g as X}from"./musicalLoadingMessages-DPXwYOsx.js";const re=()=>{const[l,P]=U(),p=V();q();const[f,L]=n.useState([]),[c,B]=n.useState([]),[v,A]=n.useState([]),[$,E]=n.useState(!0),[a,b]=n.useState(l.get("category")||""),[i,j]=n.useState(l.get("manufacturer")||""),[m,w]=n.useState(l.get("sort")||"price-low"),[x,F]=n.useState(!1),[g,z]=n.useState(!1),[d,W]=n.useState(6),{user:N}=G();n.useEffect(()=>{const s=()=>{const T=window.innerHeight-80-120-200-40-100,R=Math.max(4,Math.floor(T/(40*2)));W(Math.min(R,12))};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),n.useEffect(()=>{(async()=>{try{const[t,r,o]=await Promise.all([Y(),_(),J()]);L(t),B(r),A(o)}catch(t){console.error("Error loading data:",t)}finally{E(!1)}})()},[]),n.useEffect(()=>{const s=l.get("category")||"",t=l.get("manufacturer")||"",r=l.get("sort")||"price-low";b(s),j(t),w(r)},[l]);const h=(s,t)=>{const r=new URLSearchParams(l);s==="category"?(t?r.set("category",t):r.delete("category"),b(t)):s==="manufacturer"?(t?r.set("manufacturer",t):r.delete("manufacturer"),j(t)):s==="sort"&&(r.set("sort",t),w(t)),P(r),(s==="manufacturer"||s==="category"||s==="sort")&&setTimeout(()=>{const o=document.querySelector(".products-grid");if(o){const k=o.getBoundingClientRect().top+window.pageYOffset-80-20;window.scrollTo({top:k,behavior:"smooth"})}},100)};let u=f;a&&(u=u.filter(s=>s.categories?.id===a)),i&&(u=u.filter(s=>typeof s.manufacturer=="object"&&s.manufacturer?.id===i));const y=[...u].sort((s,t)=>{const r=s.price||0,o=t.price||0;return m==="price-high"?o-r:r-o});return $?e.jsx("div",{className:"min-h-screen bg-warm-white",children:e.jsx("div",{className:"pt-28",children:e.jsx("div",{className:"flex items-center justify-center min-h-[50vh]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-stone-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-stone-600",children:X()})]})})})}):e.jsxs("div",{children:[e.jsx(C,{variant:"hero",background:"custom",customBackground:"bg-warm-beige",className:"-mt-4",children:e.jsx(S,{size:"6xl",children:e.jsxs("div",{className:"max-w-4xl",children:[e.jsx("h1",{className:"text-4xl lg:text-5xl xl:text-6xl font-light text-stone-900 leading-tight tracking-wide mb-6",children:a&&c.find(s=>s.id===a)?.name||"Products"}),a?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"prose prose-stone prose-lg max-w-none text-stone-700 leading-relaxed",children:c.find(s=>s.id===a)?.category_description||`Browse our ${c.find(s=>s.id===a)?.name?.toLowerCase()} collection`}),e.jsxs(H,{to:"/products/list",className:"inline-flex items-center px-6 py-3 border-2 border-stone-900 text-stone-900 font-medium tracking-wide hover:bg-stone-900 hover:text-white transition-all duration-300",children:[e.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"View All Products"]}),N&&e.jsx("div",{className:"mt-4",children:e.jsx(M,{onClick:()=>p("/products/new"),variant:"primary",size:"sm",children:"Add Product"})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"prose prose-stone prose-lg max-w-none text-stone-700 leading-relaxed",children:[e.jsx("p",{className:"mb-6",children:"As America's premiere importer of high-end audio gear, we source and import the world's finest equipment directly from manufacturers. What you'll find here comes from decades of relationships with the most respected names in audio, sold through our New Hampshire store and distributed nationwide through our dealer network."}),e.jsx("p",{className:"mb-6",children:"In a world of warehouses and return policies that don't support manufacturers, we believe in curation, guidance, and real service. Every recommendation comes from hands-on experience with the gear, not algorithms or sales targets. We're here to help you navigate choices that matter, backed by expertise you can trust."}),e.jsx("p",{children:"We host listening events, maintain one of New England's finest record collections, and believe the best audio discoveries happen through conversation. Come by the store, bring your favorite music, and experience the difference that genuine expertise and passion make."})]}),N&&e.jsx(M,{onClick:()=>p("/products/new"),variant:"primary",size:"sm",children:"Add Product"})]})]})})}),e.jsx(C,{variant:"default",background:"custom",customBackground:"bg-warm-white",children:e.jsx(S,{size:"6xl",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:"lg:w-80 lg:flex-shrink-0 pt-16",children:e.jsx("div",{className:"lg:sticky lg:top-32",children:e.jsxs("div",{className:"space-y-8",children:[!a&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-semibold text-stone-900 mb-4",children:"Filter by Category"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"radio",name:"category",value:"",checked:a==="",onChange:s=>h("category",s.target.value),className:"sr-only"}),e.jsx("div",{className:`w-4 h-4 rounded-full border-2 transition-all duration-200 ${a===""?"border-primary-600 bg-primary-600":"border-stone-300 group-hover:border-stone-400"}`,children:a===""&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})})]}),e.jsx("span",{className:"text-stone-700 group-hover:text-stone-900 transition-colors",children:"All Categories"})]}),(()=>{const s=g?c:c.slice(0,d);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:g?"max-h-64 overflow-y-auto pr-2 space-y-2":"space-y-2",children:s.map(t=>e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"radio",name:"category",value:t.id,checked:a===t.id,onChange:r=>h("category",r.target.value),className:"sr-only"}),e.jsx("div",{className:`w-4 h-4 rounded-full border-2 transition-all duration-200 ${a===t.id?"border-primary-600 bg-primary-600":"border-stone-300 group-hover:border-stone-400"}`,children:a===t.id&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})})]}),e.jsx("span",{className:"text-stone-700 group-hover:text-stone-900 transition-colors",children:t.name})]},t.id))}),c.length>d&&e.jsx("button",{onClick:()=>z(!g),className:"text-sm text-stone-700 hover:text-stone-900 font-medium transition-colors mt-2 underline decoration-stone-300 hover:decoration-stone-600",children:g?`Show Less (${c.length-d} fewer)`:`Show More (${c.length-d} more)`})]})})()]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-semibold text-stone-900 mb-4",children:"Filter by Manufacturer"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"radio",name:"manufacturer",value:"",checked:i==="",onChange:s=>h("manufacturer",s.target.value),className:"sr-only"}),e.jsx("div",{className:`w-4 h-4 rounded-full border-2 transition-all duration-200 ${i===""?"border-primary-600 bg-primary-600":"border-stone-300 group-hover:border-stone-400"}`,children:i===""&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})})]}),e.jsx("span",{className:"text-stone-700 group-hover:text-stone-900 transition-colors",children:"All Manufacturers"})]}),(()=>{const s=a?v.filter(r=>f.some(o=>o.manufacturer?.id===r.id&&o.categories?.id===a)):v,t=x?s:s.slice(0,d);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:x?"max-h-64 overflow-y-auto pr-2 space-y-2":"space-y-2",children:t.map(r=>e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"radio",name:"manufacturer",value:r.id,checked:i===r.id,onChange:o=>h("manufacturer",o.target.value),className:"sr-only"}),e.jsx("div",{className:`w-4 h-4 rounded-full border-2 transition-all duration-200 ${i===r.id?"border-primary-600 bg-primary-600":"border-stone-300 group-hover:border-stone-400"}`,children:i===r.id&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})})]}),e.jsx("span",{className:"text-stone-700 group-hover:text-stone-900 transition-colors",children:r.name})]},r.id))}),s.length>d&&e.jsx("button",{onClick:()=>F(!x),className:"text-sm text-stone-700 hover:text-stone-900 font-medium transition-colors mt-2 underline decoration-stone-300 hover:decoration-stone-600",children:x?`Show Less (${s.length-d} fewer)`:`Show More (${s.length-d} more)`})]})})()]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-semibold text-stone-900 mb-4",children:"Sort by Price"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"radio",name:"sort",value:"price-low",checked:m==="price-low",onChange:s=>h("sort",s.target.value),className:"sr-only"}),e.jsx("div",{className:`w-4 h-4 rounded-full border-2 transition-all duration-200 ${m==="price-low"?"border-primary-600 bg-primary-600":"border-stone-300 group-hover:border-stone-400"}`,children:m==="price-low"&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})})]}),e.jsx("span",{className:"text-stone-700 group-hover:text-stone-900 transition-colors",children:"Low to High"})]}),e.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer group",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"radio",name:"sort",value:"price-high",checked:m==="price-high",onChange:s=>h("sort",s.target.value),className:"sr-only"}),e.jsx("div",{className:`w-4 h-4 rounded-full border-2 transition-all duration-200 ${m==="price-high"?"border-primary-600 bg-primary-600":"border-stone-300 group-hover:border-stone-400"}`,children:m==="price-high"&&e.jsx("div",{className:"w-2 h-2 bg-white rounded-full absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2"})})]}),e.jsx("span",{className:"text-stone-700 group-hover:text-stone-900 transition-colors",children:"High to Low"})]})]})]})]})})}),e.jsx("div",{className:"flex-1 pt-8 pb-16 products-grid",children:y.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-stone-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),e.jsx(K,{className:"mt-2",children:"No products found"}),e.jsx(Q,{className:"mt-1 text-stone-500",children:a||i?"Try adjusting your filters to see more products.":"No products are available at the moment."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-10",children:y.map(s=>e.jsx(H,{to:`/products/${s.slug}`,className:"block h-full",children:e.jsx(O,{product:s,showBadges:!0,showPrice:!0,showCategory:!a,className:"h-full"})},s.id))})})]})})})]})};export{re as Products};
//# sourceMappingURL=Products-EQlRXN8R.js.map
