{"version":3,"file":"ProductDetail-BuhUvLHq.js","sources":["../../node_modules/@heroicons/react/24/outline/esm/CloudArrowUpIcon.js","../../node_modules/@heroicons/react/24/outline/esm/Cog6ToothIcon.js","../../node_modules/@heroicons/react/24/outline/esm/XMarkIcon.js","../../src/components/ContextualCMS.tsx","../../src/components/ImageUpload.tsx","../../src/components/RelationshipSelector.tsx","../../src/components/ProductEditForm.tsx","../../src/components/DeleteConfirmation.tsx","../../src/components/ProductTabs.tsx","../../src/pages/ProductDetail.tsx"],"sourcesContent":["import * as React from \"react\";\nfunction CloudArrowUpIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(CloudArrowUpIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction Cog6ToothIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(Cog6ToothIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction XMarkIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M6 18 18 6M6 6l12 12\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(XMarkIcon);\nexport default ForwardRef;","import React, { useState, useEffect, ReactNode } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { XMarkIcon, Cog6ToothIcon } from '@heroicons/react/24/outline';\r\n\r\ninterface ContextualCMSProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  title: string;\r\n  children: ReactNode;\r\n  context?: string; // e.g., 'product', 'manufacturer', 'news', 'preowned'\r\n}\r\n\r\nexport const ContextualCMS: React.FC<ContextualCMSProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  title,\r\n  children,\r\n  context = 'default'\r\n}) => {\r\n  // Prevent body scroll when CMS is open\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      document.body.style.overflow = 'hidden';\r\n    } else {\r\n      document.body.style.overflow = 'unset';\r\n    }\r\n\r\n    return () => {\r\n      document.body.style.overflow = 'unset';\r\n    };\r\n  }, [isOpen]);\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      {isOpen && (\r\n        <>\r\n          {/* Backdrop */}\r\n          <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            className=\"fixed inset-0 bg-black/20 backdrop-blur-sm z-40\"\r\n            onClick={onClose}\r\n          />\r\n\r\n          {/* Main CMS Container - Slides the site over */}\r\n          <motion.div\r\n            initial={{ x: '100%' }}\r\n            animate={{ x: 0 }}\r\n            exit={{ x: '100%' }}\r\n            transition={{ type: 'spring', damping: 25, stiffness: 200 }}\r\n            className=\"fixed inset-y-0 right-0 w-full max-w-2xl bg-white shadow-2xl z-50 flex flex-col\"\r\n          >\r\n            {/* Header */}\r\n            <div className=\"flex items-center justify-between p-6 border-b border-stone-200 bg-gradient-to-r from-stone-50 to-white\">\r\n              <div className=\"flex items-center space-x-3\">\r\n                <div className=\"w-10 h-10 bg-stone-800 rounded-xl flex items-center justify-center\">\r\n                  <Cog6ToothIcon className=\"w-5 h-5 text-white\" />\r\n                </div>\r\n                <div>\r\n                  <h2 className=\"text-xl font-semibold text-stone-900\">{title}</h2>\r\n                  <p className=\"text-sm text-stone-600 capitalize\">{context} management</p>\r\n                </div>\r\n              </div>\r\n              <button\r\n                onClick={onClose}\r\n                className=\"p-2 hover:bg-stone-100 rounded-lg transition-colors duration-200\"\r\n              >\r\n                <XMarkIcon className=\"w-6 h-6 text-stone-600\" />\r\n              </button>\r\n            </div>\r\n\r\n            {/* Content Area */}\r\n            <div className=\"flex-1 overflow-y-auto\">\r\n              <div className=\"p-6\">\r\n                {children}\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n        </>\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n};\r\n\r\n// Trigger Button Component\r\ninterface CMSTriggerProps {\r\n  onClick: () => void;\r\n  label?: string;\r\n  context?: string;\r\n  className?: string;\r\n}\r\n\r\nexport const CMSTrigger: React.FC<CMSTriggerProps> = ({\r\n  onClick,\r\n  label = 'Edit',\r\n  context = 'default',\r\n  className = ''\r\n}) => {\r\n  return (\r\n    <button\r\n      onClick={onClick}\r\n      className={`\r\n        inline-flex items-center space-x-2 px-4 py-2 \r\n        bg-stone-800 text-white rounded-xl \r\n        hover:bg-stone-900 transition-all duration-200 \r\n        shadow-sm hover:shadow-md\r\n        text-sm font-medium\r\n        ${className}\r\n      `}\r\n    >\r\n      <Cog6ToothIcon className=\"w-4 h-4\" />\r\n      <span>{label}</span>\r\n    </button>\r\n  );\r\n};\r\n\r\n// Add Button Component\r\ninterface CMSAddTriggerProps {\r\n  onClick: () => void;\r\n  label?: string;\r\n  context?: string;\r\n  className?: string;\r\n}\r\n\r\nexport const CMSAddTrigger: React.FC<CMSAddTriggerProps> = ({\r\n  onClick,\r\n  label = 'Add New',\r\n  context = 'default',\r\n  className = ''\r\n}) => {\r\n  return (\r\n    <button\r\n      onClick={onClick}\r\n      className={`\r\n        inline-flex items-center space-x-2 px-4 py-2 \r\n        bg-stone-600 text-white rounded-xl \r\n        hover:bg-stone-700 transition-all duration-200 \r\n        shadow-sm hover:shadow-md\r\n        text-sm font-medium\r\n        ${className}\r\n      `}\r\n    >\r\n      <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4v16m8-8H4\" />\r\n      </svg>\r\n      <span>{label}</span>\r\n    </button>\r\n  );\r\n};\r\n\r\n","import React, { useState, useRef, useCallback } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { CloudArrowUpIcon, XMarkIcon, PhotoIcon } from '@heroicons/react/24/outline';\r\nimport { uploadImage, getImageUrl } from '../lib/supabase';\r\n\r\ninterface ImageUploadProps {\r\n  onUpload: (imageUrl: string) => void;\r\n  onRemove?: () => void;\r\n  currentImage?: string;\r\n  multiple?: boolean;\r\n  className?: string;\r\n  folder?: string; // e.g., 'products', 'news', 'preowned'\r\n}\r\n\r\nexport const ImageUpload: React.FC<ImageUploadProps> = ({\r\n  onUpload,\r\n  onRemove,\r\n  currentImage,\r\n  multiple = false,\r\n  className = '',\r\n  folder = 'general'\r\n}) => {\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [uploading, setUploading] = useState(false);\r\n  const [uploadedImages, setUploadedImages] = useState<string[]>(currentImage ? [currentImage] : []);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n\r\n  const handleDragOver = useCallback((e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    setIsDragging(true);\r\n  }, []);\r\n\r\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    setIsDragging(false);\r\n  }, []);\r\n\r\n  const handleDrop = useCallback(async (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    setIsDragging(false);\r\n    \r\n    const files = Array.from(e.dataTransfer.files);\r\n    await handleFiles(files);\r\n  }, []);\r\n\r\n  const handleFileSelect = useCallback(async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const files = Array.from(e.target.files || []);\r\n    await handleFiles(files);\r\n  }, []);\r\n\r\n  const handleFiles = async (files: File[]) => {\r\n    const imageFiles = files.filter(file => file.type.startsWith('image/'));\r\n    \r\n    if (imageFiles.length === 0) return;\r\n\r\n    setUploading(true);\r\n    \r\n    try {\r\n      const uploadPromises = imageFiles.map(async (file) => {\r\n        const imageUrl = await uploadImage(file, folder);\r\n        return imageUrl;\r\n      });\r\n\r\n      const uploadedUrls = await Promise.all(uploadPromises);\r\n      \r\n      if (multiple) {\r\n        setUploadedImages(prev => [...prev, ...uploadedUrls]);\r\n        uploadedUrls.forEach(url => onUpload(url));\r\n      } else {\r\n        setUploadedImages(uploadedUrls);\r\n        onUpload(uploadedUrls[0]);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error uploading images:', error);\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  const removeImage = (index: number) => {\r\n    const newImages = uploadedImages.filter((_, i) => i !== index);\r\n    setUploadedImages(newImages);\r\n    if (onRemove && newImages.length === 0) {\r\n      onRemove();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={`space-y-4 ${className}`}>\r\n      {/* Current Images Display */}\r\n      {uploadedImages.length > 0 && (\r\n        <div className=\"grid grid-cols-2 md:grid-cols-3 gap-4\">\r\n          {uploadedImages.map((imageUrl, index) => (\r\n            <div key={index} className=\"relative group\">\r\n              <img\r\n                src={getImageUrl(imageUrl)}\r\n                alt={`Uploaded image ${index + 1}`}\r\n                className=\"w-full h-32 object-cover rounded-lg border border-stone-200\"\r\n              />\r\n              <button\r\n                onClick={() => removeImage(index)}\r\n                className=\"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity duration-200\"\r\n              >\r\n                <XMarkIcon className=\"w-4 h-4\" />\r\n              </button>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      {/* Upload Area */}\r\n      <motion.div\r\n        animate={isDragging ? { scale: 1.02 } : { scale: 1 }}\r\n        className={`\r\n          relative border-2 border-dashed rounded-xl p-8 text-center transition-all duration-200\r\n          ${isDragging \r\n            ? 'border-stone-400 bg-stone-50' \r\n            : 'border-stone-300 hover:border-stone-400 hover:bg-stone-50'\r\n          }\r\n        `}\r\n        onDragOver={handleDragOver}\r\n        onDragLeave={handleDragLeave}\r\n        onDrop={handleDrop}\r\n      >\r\n        <input\r\n          ref={fileInputRef}\r\n          type=\"file\"\r\n          multiple={multiple}\r\n          accept=\"image/*\"\r\n          onChange={handleFileSelect}\r\n          className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\r\n        />\r\n        \r\n        <div className=\"space-y-4\">\r\n          <div className=\"mx-auto w-12 h-12 bg-stone-100 rounded-full flex items-center justify-center\">\r\n            {uploading ? (\r\n              <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-stone-600\"></div>\r\n            ) : (\r\n              <CloudArrowUpIcon className=\"w-6 h-6 text-stone-600\" />\r\n            )}\r\n          </div>\r\n          \r\n          <div>\r\n            <p className=\"text-lg font-medium text-stone-900\">\r\n              {uploading ? 'Uploading...' : 'Drop images here or click to upload'}\r\n            </p>\r\n            <p className=\"text-sm text-stone-600 mt-1\">\r\n              {multiple ? 'Upload multiple images' : 'Upload a single image'}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </motion.div>\r\n    </div>\r\n  );\r\n};\r\n\r\n","import React, { useState, useEffect } from 'react';\r\nimport { ChevronDownIcon, XMarkIcon, MagnifyingGlassIcon } from '@heroicons/react/24/outline';\r\nimport { Product, getProductsWithCategories } from '../lib/supabase';\r\n\r\ninterface RelationshipSelectorProps {\r\n  selectedIds: string[];\r\n  onSelectionChange: (ids: string[]) => void;\r\n  excludeProductId?: string; // Exclude current product from suggestions\r\n  placeholder?: string;\r\n  className?: string;\r\n}\r\n\r\nexport const RelationshipSelector: React.FC<RelationshipSelectorProps> = ({\r\n  selectedIds,\r\n  onSelectionChange,\r\n  excludeProductId,\r\n  placeholder = 'Select products...',\r\n  className = ''\r\n}) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  // Load products for selection\r\n  useEffect(() => {\r\n    const loadProducts = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const productsData = await getProductsWithCategories();\r\n        setProducts(productsData);\r\n      } catch (error) {\r\n        console.error('Error loading products:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadProducts();\r\n  }, []);\r\n\r\n  // Filter products based on search and exclusions\r\n  const filteredProducts = products.filter(product => {\r\n    const matchesSearch = product.title.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n                         (product.manufacturer && typeof product.manufacturer === 'object' && \r\n                          product.manufacturer.name.toLowerCase().includes(searchTerm.toLowerCase()));\r\n    const notExcluded = !excludeProductId || product.id !== excludeProductId;\r\n    const notAlreadySelected = !selectedIds.includes(product.id);\r\n    \r\n    return matchesSearch && notExcluded && notAlreadySelected;\r\n  });\r\n\r\n  const selectedProducts = products.filter(product => selectedIds.includes(product.id));\r\n\r\n  const addProduct = (productId: string) => {\r\n    if (!selectedIds.includes(productId)) {\r\n      onSelectionChange([...selectedIds, productId]);\r\n    }\r\n    setSearchTerm('');\r\n    setIsOpen(false);\r\n  };\r\n\r\n  const removeProduct = (productId: string) => {\r\n    onSelectionChange(selectedIds.filter(id => id !== productId));\r\n  };\r\n\r\n  return (\r\n    <div className={`relative ${className}`}>\r\n      {/* Selected Products Display */}\r\n      {selectedProducts.length > 0 && (\r\n        <div className=\"mb-4 space-y-2\">\r\n          <label className=\"block text-sm font-medium text-stone-700\">Selected Products</label>\r\n          <div className=\"space-y-2\">\r\n            {selectedProducts.map(product => (\r\n              <div key={product.id} className=\"flex items-center justify-between p-3 bg-stone-50 rounded-lg border border-stone-200\">\r\n                <div className=\"flex items-center space-x-3\">\r\n                  {product.product_hero_image && (\r\n                    <img\r\n                      src={`https://myrdvcihcqphixvunvkv.supabase.co/storage/v1/object/public/images/${product.product_hero_image}`}\r\n                      alt={product.title}\r\n                      className=\"w-8 h-8 object-cover rounded\"\r\n                    />\r\n                  )}\r\n                  <div>\r\n                    <p className=\"text-sm font-medium text-stone-900\">{product.title}</p>\r\n                    <p className=\"text-xs text-stone-600\">\r\n                      {product.manufacturer && typeof product.manufacturer === 'object' \r\n                        ? product.manufacturer.name \r\n                        : product.manufacturer}\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={() => removeProduct(product.id)}\r\n                  className=\"p-1 hover:bg-stone-200 rounded transition-colors duration-200\"\r\n                >\r\n                  <XMarkIcon className=\"w-4 h-4 text-stone-600\" />\r\n                </button>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Search and Selection */}\r\n      <div className=\"relative\">\r\n        <div className=\"relative\">\r\n          <input\r\n            type=\"text\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            onFocus={() => setIsOpen(true)}\r\n            placeholder={placeholder}\r\n            className=\"w-full px-4 py-3 pr-10 border border-stone-300 rounded-lg focus:ring-2 focus:ring-stone-500 focus:border-transparent\"\r\n          />\r\n          <MagnifyingGlassIcon className=\"absolute right-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-stone-400\" />\r\n        </div>\r\n\r\n        {/* Dropdown */}\r\n        {isOpen && (\r\n          <div className=\"absolute z-50 w-full mt-1 bg-white border border-stone-200 rounded-lg shadow-lg max-h-60 overflow-y-auto\">\r\n            {loading ? (\r\n              <div className=\"p-4 text-center text-stone-600\">\r\n                <div className=\"animate-spin rounded-full h-6 w-6 border-b-2 border-stone-600 mx-auto\"></div>\r\n                <p className=\"mt-2\">Loading products...</p>\r\n              </div>\r\n            ) : filteredProducts.length === 0 ? (\r\n              <div className=\"p-4 text-center text-stone-600\">\r\n                {searchTerm ? 'No products found' : 'Start typing to search products'}\r\n              </div>\r\n            ) : (\r\n              <div className=\"py-2\">\r\n                {filteredProducts.slice(0, 10).map(product => (\r\n                  <button\r\n                    key={product.id}\r\n                    onClick={() => addProduct(product.id)}\r\n                    className=\"w-full px-4 py-3 text-left hover:bg-stone-50 transition-colors duration-200 flex items-center space-x-3\"\r\n                  >\r\n                    {product.product_hero_image && (\r\n                      <img\r\n                        src={`https://myrdvcihcqphixvunvkv.supabase.co/storage/v1/object/public/images/${product.product_hero_image}`}\r\n                        alt={product.title}\r\n                        className=\"w-8 h-8 object-cover rounded\"\r\n                      />\r\n                    )}\r\n                    <div>\r\n                      <p className=\"text-sm font-medium text-stone-900\">{product.title}</p>\r\n                      <p className=\"text-xs text-stone-600\">\r\n                        {product.manufacturer && typeof product.manufacturer === 'object' \r\n                          ? product.manufacturer.name \r\n                          : product.manufacturer}\r\n                      </p>\r\n                    </div>\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Click outside to close */}\r\n      {isOpen && (\r\n        <div \r\n          className=\"fixed inset-0 z-40\" \r\n          onClick={() => setIsOpen(false)}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Product, Review, updateProduct, getProductCategories, getManufacturers, ProductCategory, Manufacturer } from '../lib/supabase';\r\nimport { ImageUpload } from './ImageUpload';\r\nimport { RelationshipSelector } from './RelationshipSelector';\r\n\r\ninterface ProductEditFormProps {\r\n  product: Product;\r\n  onSave: () => void;\r\n  onCancel: () => void;\r\n}\r\n\r\nexport const ProductEditForm: React.FC<ProductEditFormProps> = ({ product, onSave, onCancel }) => {\r\n  const [formData, setFormData] = useState({\r\n    title: product.title || '',\r\n    content: product.content || '',\r\n    specs: product.specs || '',\r\n    price: product.price || 0,\r\n    show_price: product.show_price ?? true,\r\n    available_for_demo: product.available_for_demo ?? true,\r\n    available_to_buy_online: product.available_to_buy_online ?? true,\r\n    published: product.published ?? true,\r\n    pairs_well_with: product.pairs_well_with || [],\r\n    also_consider: product.also_consider || [],\r\n  });\r\n\r\n  const [reviews, setReviews] = useState<Review[]>([]);\r\n  const [categories, setCategories] = useState<ProductCategory[]>([]);\r\n  const [manufacturers, setManufacturers] = useState<Manufacturer[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [activeTab, setActiveTab] = useState<'basic' | 'description' | 'specs' | 'reviews' | 'relationships'>('basic');\r\n\r\n  // Parse existing reviews\r\n  useEffect(() => {\r\n    if (product.reivews_set) {\r\n      if (Array.isArray(product.reivews_set)) {\r\n        setReviews(product.reivews_set);\r\n      } else if (typeof product.reivews_set === 'string') {\r\n        try {\r\n          const parsed = JSON.parse(product.reivews_set);\r\n          setReviews(Array.isArray(parsed) ? parsed : []);\r\n        } catch {\r\n          setReviews([]);\r\n        }\r\n      }\r\n    }\r\n  }, [product.reivews_set]);\r\n\r\n  // Load categories and manufacturers\r\n  useEffect(() => {\r\n    const loadData = async () => {\r\n      const [categoriesData, manufacturersData] = await Promise.all([\r\n        getProductCategories(),\r\n        getManufacturers()\r\n      ]);\r\n      setCategories(categoriesData);\r\n      setManufacturers(manufacturersData);\r\n    };\r\n    loadData();\r\n  }, []);\r\n\r\n  const handleInputChange = (field: string, value: any) => {\r\n    setFormData(prev => ({ ...prev, [field]: value }));\r\n  };\r\n\r\n  const addReview = () => {\r\n    const newReview: Review = {\r\n      excerpt: '',\r\n      attribution: '',\r\n      link: '',\r\n      date_of_review: new Date().toISOString().split('T')[0]\r\n    };\r\n    setReviews(prev => [...prev, newReview]);\r\n  };\r\n\r\n  const updateReview = (index: number, field: keyof Review, value: string) => {\r\n    setReviews(prev => prev.map((review, i) => \r\n      i === index ? { ...review, [field]: value } : review\r\n    ));\r\n  };\r\n\r\n  const removeReview = (index: number) => {\r\n    setReviews(prev => prev.filter((_, i) => i !== index));\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const updateData = {\r\n        ...formData,\r\n        reivews_set: reviews,\r\n        pairs_well_with: formData.pairs_well_with,\r\n        also_consider: formData.also_consider,\r\n      };\r\n      await updateProduct(product.id, updateData);\r\n      onSave();\r\n    } catch (error) {\r\n      console.error('Error saving product:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const tabs = [\r\n    { id: 'basic', label: 'Basic Info', icon: '📋' },\r\n    { id: 'description', label: 'Description', icon: '📝' },\r\n    { id: 'specs', label: 'Specifications', icon: '⚙️' },\r\n    { id: 'reviews', label: 'Reviews', icon: '⭐' },\r\n    { id: 'relationships', label: 'Relationships', icon: '🔗' }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Tab Navigation */}\r\n      <div className=\"border-b border-stone-200\">\r\n        <nav className=\"flex space-x-8\">\r\n          {tabs.map((tab) => (\r\n            <button\r\n              key={tab.id}\r\n              onClick={() => setActiveTab(tab.id as any)}\r\n              className={`flex items-center space-x-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${\r\n                activeTab === tab.id\r\n                  ? 'border-stone-900 text-stone-900'\r\n                  : 'border-transparent text-stone-500 hover:text-stone-700 hover:border-stone-300'\r\n              }`}\r\n            >\r\n              <span>{tab.icon}</span>\r\n              <span>{tab.label}</span>\r\n            </button>\r\n          ))}\r\n        </nav>\r\n      </div>\r\n\r\n      {/* Tab Content */}\r\n      {activeTab === 'basic' && (\r\n        <div className=\"space-y-6\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-stone-700 mb-2\">Product Title</label>\r\n            <input\r\n              type=\"text\"\r\n              value={formData.title}\r\n              onChange={(e) => handleInputChange('title', e.target.value)}\r\n              className=\"w-full border border-stone-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-stone-500 focus:border-transparent\"\r\n            />\r\n          </div>\r\n\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-stone-700 mb-2\">Product Image</label>\r\n            <ImageUpload\r\n              onUpload={(imageUrl) => handleInputChange('product_hero_image', imageUrl)}\r\n              currentImage={product.product_hero_image}\r\n              folder=\"products\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-stone-700 mb-2\">Price</label>\r\n              <input\r\n                type=\"number\"\r\n                value={formData.price}\r\n                onChange={(e) => handleInputChange('price', parseInt(e.target.value) || 0)}\r\n                className=\"w-full border border-stone-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-stone-500 focus:border-transparent\"\r\n              />\r\n            </div>\r\n            \r\n            <div>\r\n              <label className=\"block text-sm font-medium text-stone-700 mb-2\">Category</label>\r\n              <div className=\"text-sm text-stone-600 py-3\">\r\n                {product.categories?.name || 'No category assigned'}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n            <label className=\"flex items-center space-x-3\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={formData.show_price}\r\n                onChange={(e) => handleInputChange('show_price', e.target.checked)}\r\n                className=\"rounded border-stone-300 text-stone-600 focus:ring-stone-500\"\r\n              />\r\n              <span className=\"text-sm font-medium text-stone-700\">Show Price</span>\r\n            </label>\r\n            \r\n            <label className=\"flex items-center space-x-3\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={formData.available_for_demo}\r\n                onChange={(e) => handleInputChange('available_for_demo', e.target.checked)}\r\n                className=\"rounded border-stone-300 text-stone-600 focus:ring-stone-500\"\r\n              />\r\n              <span className=\"text-sm font-medium text-stone-700\">Available for Demo</span>\r\n            </label>\r\n            \r\n            <label className=\"flex items-center space-x-3\">\r\n              <input\r\n                type=\"checkbox\"\r\n                checked={formData.available_to_buy_online}\r\n                onChange={(e) => handleInputChange('available_to_buy_online', e.target.checked)}\r\n                className=\"rounded border-stone-300 text-stone-600 focus:ring-stone-500\"\r\n              />\r\n              <span className=\"text-sm font-medium text-stone-700\">Available Online</span>\r\n            </label>\r\n          </div>\r\n\r\n          <label className=\"flex items-center space-x-3\">\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={formData.published}\r\n              onChange={(e) => handleInputChange('published', e.target.checked)}\r\n              className=\"rounded border-stone-300 text-stone-600 focus:ring-stone-500\"\r\n            />\r\n            <span className=\"text-sm font-medium text-stone-700\">Published</span>\r\n          </label>\r\n        </div>\r\n      )}\r\n\r\n      {activeTab === 'description' && (\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-stone-700 mb-2\">Product Description</label>\r\n          <textarea\r\n            value={formData.content}\r\n            onChange={(e) => handleInputChange('content', e.target.value)}\r\n            rows={12}\r\n            className=\"w-full border border-stone-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-stone-500 focus:border-transparent\"\r\n            placeholder=\"Enter the product description. You can use HTML tags for formatting.\"\r\n          />\r\n          <p className=\"text-sm text-stone-500 mt-2\">\r\n            You can use HTML tags like &lt;p&gt;, &lt;h2&gt;, &lt;h3&gt;, &lt;strong&gt;, &lt;em&gt;, &lt;ul&gt;, &lt;li&gt; for formatting.\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      {activeTab === 'specs' && (\r\n        <div>\r\n          <label className=\"block text-sm font-medium text-stone-700 mb-2\">Technical Specifications</label>\r\n          <textarea\r\n            value={formData.specs}\r\n            onChange={(e) => handleInputChange('specs', e.target.value)}\r\n            rows={12}\r\n            className=\"w-full border border-stone-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-stone-500 focus:border-transparent\"\r\n            placeholder=\"Enter the technical specifications. You can use HTML tags for formatting.\"\r\n          />\r\n          <p className=\"text-sm text-stone-500 mt-2\">\r\n            You can use HTML tags like &lt;p&gt;, &lt;h2&gt;, &lt;h3&gt;, &lt;strong&gt;, &lt;em&gt;, &lt;ul&gt;, &lt;li&gt; for formatting.\r\n          </p>\r\n        </div>\r\n      )}\r\n\r\n      {activeTab === 'reviews' && (\r\n        <div className=\"space-y-6\">\r\n          <div className=\"flex justify-between items-center\">\r\n            <h3 className=\"text-lg font-medium text-stone-900\">Product Reviews</h3>\r\n            <button\r\n              onClick={addReview}\r\n              className=\"inline-flex items-center px-4 py-2 bg-stone-800 text-white rounded-lg hover:bg-stone-900 transition-colors duration-200 text-sm font-medium\"\r\n            >\r\n              <span>Add Review</span>\r\n            </button>\r\n          </div>\r\n\r\n          {reviews.length === 0 ? (\r\n            <div className=\"text-center py-12\">\r\n              <div className=\"w-16 h-16 bg-stone-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                <span className=\"text-2xl\">⭐</span>\r\n              </div>\r\n              <h3 className=\"text-xl font-medium text-stone-900 mb-2\">No Reviews Yet</h3>\r\n              <p className=\"text-stone-600\">Add the first review for this product.</p>\r\n            </div>\r\n          ) : (\r\n            <div className=\"space-y-6\">\r\n              {reviews.map((review, index) => (\r\n                <div key={index} className=\"border border-stone-200 rounded-xl p-6 bg-stone-50\">\r\n                  <div className=\"flex justify-between items-start mb-4\">\r\n                    <h4 className=\"text-lg font-medium text-stone-900\">Review {index + 1}</h4>\r\n                    <button\r\n                      onClick={() => removeReview(index)}\r\n                      className=\"text-red-600 hover:text-red-800 text-sm font-medium\"\r\n                    >\r\n                      Remove\r\n                    </button>\r\n                  </div>\r\n                  \r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4\">\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-stone-700 mb-2\">Attribution</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        value={review.attribution || ''}\r\n                        onChange={(e) => updateReview(index, 'attribution', e.target.value)}\r\n                        className=\"w-full border border-stone-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-stone-500 focus:border-transparent\"\r\n                        placeholder=\"Reviewer name or publication\"\r\n                      />\r\n                    </div>\r\n                    \r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-stone-700 mb-2\">Date</label>\r\n                      <input\r\n                        type=\"date\"\r\n                        value={review.date_of_review || ''}\r\n                        onChange={(e) => updateReview(index, 'date_of_review', e.target.value)}\r\n                        className=\"w-full border border-stone-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-stone-500 focus:border-transparent\"\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"mb-4\">\r\n                    <label className=\"block text-sm font-medium text-stone-700 mb-2\">Review Link (Optional)</label>\r\n                    <input\r\n                      type=\"url\"\r\n                      value={review.link || ''}\r\n                      onChange={(e) => updateReview(index, 'link', e.target.value)}\r\n                      className=\"w-full border border-stone-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-stone-500 focus:border-transparent\"\r\n                      placeholder=\"https://...\"\r\n                    />\r\n                  </div>\r\n                  \r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-stone-700 mb-2\">Review Excerpt</label>\r\n                    <textarea\r\n                      value={review.excerpt || ''}\r\n                      onChange={(e) => updateReview(index, 'excerpt', e.target.value)}\r\n                      rows={6}\r\n                      className=\"w-full border border-stone-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-stone-500 focus:border-transparent\"\r\n                      placeholder=\"Enter the review excerpt. You can use HTML tags for formatting.\"\r\n                    />\r\n                    <p className=\"text-sm text-stone-500 mt-2\">\r\n                      You can use HTML tags like &lt;p&gt;, &lt;strong&gt;, &lt;em&gt; for formatting.\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {activeTab === 'relationships' && (\r\n        <div className=\"space-y-8\">\r\n          <div className=\"text-center mb-8\">\r\n            <h3 className=\"text-2xl font-light text-stone-900 mb-2\">Product Relationships</h3>\r\n            <p className=\"text-stone-600\">Manage which products this item pairs well with and alternatives to consider.</p>\r\n          </div>\r\n\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n            {/* Pairs Well With */}\r\n            <div className=\"bg-stone-50 rounded-2xl p-6 border border-stone-200\">\r\n              <h4 className=\"text-lg font-medium text-stone-900 mb-4\">Pairs Well With</h4>\r\n              <p className=\"text-sm text-stone-600 mb-4\">\r\n                Choose products from other categories that work well with this item.\r\n              </p>\r\n              <RelationshipSelector\r\n                selectedIds={formData.pairs_well_with}\r\n                onSelectionChange={(ids) => handleInputChange('pairs_well_with', ids)}\r\n                excludeProductId={product.id}\r\n                placeholder=\"Search for products to pair with...\"\r\n              />\r\n            </div>\r\n\r\n            {/* Also Consider */}\r\n            <div className=\"bg-stone-50 rounded-2xl p-6 border border-stone-200\">\r\n              <h4 className=\"text-lg font-medium text-stone-900 mb-4\">Also Consider</h4>\r\n              <p className=\"text-sm text-stone-600 mb-4\">\r\n                Choose alternative products in the same category and price range.\r\n              </p>\r\n              <RelationshipSelector\r\n                selectedIds={formData.also_consider}\r\n                onSelectionChange={(ids) => handleInputChange('also_consider', ids)}\r\n                excludeProductId={product.id}\r\n                placeholder=\"Search for alternative products...\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Action Buttons */}\r\n      <div className=\"flex justify-end space-x-4 pt-6 border-t border-stone-200\">\r\n        <button\r\n          onClick={onCancel}\r\n          className=\"px-6 py-3 border border-stone-300 text-stone-700 rounded-lg hover:bg-stone-100 transition-colors duration-200 font-medium\"\r\n        >\r\n          Cancel\r\n        </button>\r\n        <button\r\n          onClick={handleSave}\r\n          disabled={loading}\r\n          className=\"px-6 py-3 bg-stone-800 text-white rounded-lg hover:bg-stone-900 transition-colors duration-200 font-medium disabled:opacity-50\"\r\n        >\r\n          {loading ? 'Saving...' : 'Save Changes'}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n","import React from 'react';\r\n\r\ninterface DeleteConfirmationProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onConfirm: () => void;\r\n  title: string;\r\n  message: string;\r\n  loading?: boolean;\r\n}\r\n\r\nexport const DeleteConfirmation: React.FC<DeleteConfirmationProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  onConfirm,\r\n  title,\r\n  message,\r\n  loading = false,\r\n}) => {\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n      <div className=\"bg-white rounded-lg p-6 max-w-md w-full mx-4\">\r\n        <div className=\"flex items-center mb-4\">\r\n          <div className=\"flex-shrink-0\">\r\n            <svg className=\"h-6 w-6 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\" />\r\n            </svg>\r\n          </div>\r\n          <div className=\"ml-3\">\r\n            <h3 className=\"text-lg font-medium text-gray-900\">{title}</h3>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"mb-6\">\r\n          <p className=\"text-sm text-gray-500\">{message}</p>\r\n        </div>\r\n\r\n        <div className=\"flex justify-end space-x-3\">\r\n          <button\r\n            type=\"button\"\r\n            onClick={onClose}\r\n            disabled={loading}\r\n            className=\"px-4 py-2 text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            onClick={onConfirm}\r\n            disabled={loading}\r\n            className=\"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            {loading ? 'Deleting...' : 'Delete'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}; ","import React, { useState, useEffect } from 'react';\r\nimport { Product, Review } from '../lib/supabase';\r\n\r\n// Helper function to detect if content contains HTML tags\r\nconst containsHtmlTags = (content: string): boolean => {\r\n  return /<[^>]+>/g.test(content);\r\n};\r\n\r\n// Helper function to clean HTML content and convert to readable text\r\nconst cleanHtmlContent = (htmlString: string): string => {\r\n  if (!htmlString) return '';\r\n  \r\n  // If it doesn't contain HTML tags, return as-is\r\n  if (!containsHtmlTags(htmlString)) {\r\n    return htmlString;\r\n  }\r\n  \r\n  return htmlString\r\n    // Convert HTML lists to bullet points\r\n    .replace(/<ul[^>]*>/gi, '')\r\n    .replace(/<\\/ul>/gi, '\\n')\r\n    .replace(/<li[^>]*>/gi, '• ')\r\n    .replace(/<\\/li>/gi, '\\n')\r\n    \r\n    // Convert headings\r\n    .replace(/<h[1-6][^>]*>/gi, '\\n## ')\r\n    .replace(/<\\/h[1-6]>/gi, '\\n\\n')\r\n    \r\n    // Convert paragraphs and line breaks\r\n    .replace(/<p[^>]*>/gi, '')\r\n    .replace(/<\\/p>/gi, '\\n\\n')\r\n    .replace(/<br[^>]*\\/?>/gi, '\\n')\r\n    \r\n    // Remove all other HTML tags\r\n    .replace(/<[^>]*>/g, '')\r\n    \r\n    // Clean up whitespace and entities\r\n    .replace(/&nbsp;/g, ' ')\r\n    .replace(/&amp;/g, '&')\r\n    .replace(/&lt;/g, '<')\r\n    .replace(/&gt;/g, '>')\r\n    .replace(/&quot;/g, '\"')\r\n    .replace(/&#39;/g, \"'\")\r\n    \r\n    // Clean up excessive whitespace\r\n    .replace(/\\n\\s*\\n\\s*\\n/g, '\\n\\n') // Multiple line breaks to double\r\n    .replace(/^\\s+|\\s+$/g, '') // Trim start/end\r\n    .replace(/[ \\t]+/g, ' '); // Multiple spaces to single\r\n};\r\n\r\n// Helper function to extract text from Statamic content structure\r\nconst extractTextFromStatamicContent = (content: any): string => {\r\n  if (!content) return '';\r\n  \r\n  if (typeof content === 'string') {\r\n    return content;\r\n  }\r\n  \r\n  if (Array.isArray(content)) {\r\n    return content.map(item => {\r\n      const text = extractTextFromStatamicContent(item);\r\n      \r\n      // Handle different content types with appropriate formatting\r\n      if (item && item.type) {\r\n        switch (item.type) {\r\n          case 'paragraph':\r\n            return text ? text + '\\n\\n' : '';\r\n          case 'heading':\r\n            return text ? `## ${text}\\n\\n` : '';\r\n          case 'bullet_list':\r\n          case 'bulletList':\r\n            return text ? text + '\\n\\n' : '';\r\n          case 'list_item':\r\n            return text ? `• ${text}\\n` : '';\r\n          case 'hardBreak':\r\n          case 'hard_break':\r\n            return '\\n';\r\n          default:\r\n            return text;\r\n        }\r\n      }\r\n      return text;\r\n    }).join('').replace(/\\n\\n$/, ''); // Remove trailing line breaks\r\n  }\r\n  \r\n  if (typeof content === 'object') {\r\n    if (content.type === 'paragraph' && content.content) {\r\n      return extractTextFromStatamicContent(content.content);\r\n    }\r\n    \r\n    if (content.type === 'heading' && content.content) {\r\n      return extractTextFromStatamicContent(content.content);\r\n    }\r\n    \r\n    if ((content.type === 'bullet_list' || content.type === 'bulletList') && content.content) {\r\n      return extractTextFromStatamicContent(content.content);\r\n    }\r\n    \r\n    if (content.type === 'list_item' && content.content) {\r\n      return extractTextFromStatamicContent(content.content);\r\n    }\r\n    \r\n    if (content.type === 'hardBreak' || content.type === 'hard_break') {\r\n      return '\\n';\r\n    }\r\n    \r\n    if (content.text) {\r\n      return content.text;\r\n    }\r\n    \r\n    if (content.content) {\r\n      return extractTextFromStatamicContent(content.content);\r\n    }\r\n    \r\n    // Try to find text in any property\r\n    for (const key in content) {\r\n      if (content[key] && typeof content[key] === 'object') {\r\n        const text = extractTextFromStatamicContent(content[key]);\r\n        if (text) return text;\r\n      }\r\n    }\r\n  }\r\n  \r\n  return '';\r\n};\r\n\r\ninterface ProductTabsProps {\r\n  product: Product;\r\n}\r\n\r\n// Helper function to check if product has any tab content\r\nexport const hasTabContent = (product: Product): boolean => {\r\n  // Parse description to check if it has actual content\r\n  const parseDescription = (description: any): string => {\r\n    if (!description) return '';\r\n    \r\n    if (typeof description === 'string') {\r\n      try {\r\n        const parsed = JSON.parse(description);\r\n        if (Array.isArray(parsed)) {\r\n          return extractTextFromStatamicContent(parsed);\r\n        }\r\n      } catch {\r\n        // Not JSON, might be HTML or clean text - clean only if it has HTML\r\n        return cleanHtmlContent(description);\r\n      }\r\n    }\r\n    \r\n    return extractTextFromStatamicContent(description);\r\n  };\r\n\r\n  const cleanDescription = parseDescription((product as any).description);\r\n  \r\n  // Parse specs to check if they have actual content\r\n  const parseSpecsForCheck = (specs: any): string => {\r\n    if (!specs) return '';\r\n    \r\n    if (typeof specs === 'string') {\r\n      try {\r\n        const parsed = JSON.parse(specs);\r\n        if (Array.isArray(parsed)) {\r\n          return extractTextFromStatamicContent(parsed);\r\n        }\r\n      } catch {\r\n        // Not JSON, might be HTML - clean it up\r\n        return cleanHtmlContent(specs);\r\n      }\r\n    }\r\n    \r\n    return extractTextFromStatamicContent(specs);\r\n  };\r\n\r\n  const cleanSpecs = parseSpecsForCheck(product.specs);\r\n  \r\n  let reviews: Review[] = [];\r\n  try {\r\n    if (product.reivews_set) {\r\n      const parsed = JSON.parse(product.reivews_set);\r\n      if (Array.isArray(parsed)) {\r\n        reviews = parsed.map(review => ({\r\n          excerpt: extractTextFromStatamicContent(review.excerpt),\r\n          attribution: review.attribution,\r\n          date_of_review: review.date_of_review,\r\n          link: review.link\r\n        })).filter(review => review.excerpt || review.attribution);\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.warn('Error parsing reviews:', error);\r\n  }\r\n  \r\n  return !!(cleanDescription || cleanSpecs || reviews.length > 0);\r\n};\r\n\r\nexport const ProductTabs: React.FC<ProductTabsProps> = ({ product }) => {\r\n  // Parse description from Statamic Bard content\r\n  const parseDescription = (description: any): string => {\r\n    if (!description) return '';\r\n    \r\n    // If it's already a plain string, return it\r\n    if (typeof description === 'string') {\r\n      // Check if it looks like JSON\r\n      try {\r\n        const parsed = JSON.parse(description);\r\n        if (Array.isArray(parsed)) {\r\n          return extractTextFromStatamicContent(parsed);\r\n        }\r\n      } catch {\r\n        // Not JSON, might be HTML or clean text - clean only if it has HTML\r\n        return cleanHtmlContent(description);\r\n      }\r\n    }\r\n    \r\n    // If it's already an object or array, extract text\r\n    return extractTextFromStatamicContent(description);\r\n  };\r\n\r\n  // Parse specs from Statamic Bard content\r\n  const parseSpecs = (specs: any): string => {\r\n    if (!specs) return '';\r\n    \r\n    if (typeof specs === 'string') {\r\n      // Check if it looks like JSON/Statamic content\r\n      try {\r\n        const parsed = JSON.parse(specs);\r\n        if (Array.isArray(parsed)) {\r\n          return extractTextFromStatamicContent(parsed);\r\n        }\r\n      } catch {\r\n        // Not JSON, might be HTML - clean it up\r\n        return cleanHtmlContent(specs);\r\n      }\r\n    }\r\n    \r\n    // If it's already an object or array, extract text\r\n    return extractTextFromStatamicContent(specs);\r\n  };\r\n\r\n  // Parse reviews from Statamic structure\r\n  const parseReviews = (reviews: any): Review[] => {\r\n    if (!reviews) return [];\r\n    \r\n    if (typeof reviews === 'string') {\r\n      try {\r\n        const parsed = JSON.parse(reviews);\r\n        return parseReviews(parsed);\r\n      } catch {\r\n        return [];\r\n      }\r\n    }\r\n    \r\n    if (Array.isArray(reviews)) {\r\n      return reviews.map(review => {\r\n        // Extract the actual content from nested Statamic structure\r\n        let excerptText = '';\r\n        if (review.excerpt && Array.isArray(review.excerpt)) {\r\n          // Look for paragraph content in the excerpt array\r\n          review.excerpt.forEach((item: any) => {\r\n            if (item.type === 'paragraph' && item.content && Array.isArray(item.content)) {\r\n              item.content.forEach((textItem: any) => {\r\n                if (textItem.type === 'text' && textItem.text) {\r\n                  excerptText += textItem.text + ' ';\r\n                }\r\n              });\r\n            }\r\n          });\r\n        }\r\n        \r\n        return {\r\n          ...review,\r\n          excerpt: excerptText.trim() || review.excerpt || ''\r\n        };\r\n      });\r\n    }\r\n    \r\n    return [];\r\n  };\r\n\r\n  const reviews = parseReviews(product.reivews_set);\r\n  const cleanDescription = parseDescription((product as any).description);\r\n  const cleanSpecs = parseSpecs(product.specs);\r\n\r\n  const allTabs = [\r\n    { \r\n      id: 'description', \r\n      label: 'Description', \r\n      content: cleanDescription,\r\n      hasContent: !!cleanDescription,\r\n      icon: (\r\n        <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\r\n        </svg>\r\n      )\r\n    },\r\n    { \r\n      id: 'specs', \r\n      label: 'Specifications', \r\n      content: cleanSpecs,\r\n      hasContent: !!cleanSpecs,\r\n      icon: (\r\n        <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01\" />\r\n        </svg>\r\n      )\r\n    },\r\n    { \r\n      id: 'reviews', \r\n      label: 'Reviews', \r\n      content: reviews,\r\n      hasContent: reviews.length > 0,\r\n      icon: (\r\n        <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z\" />\r\n        </svg>\r\n      )\r\n    }\r\n  ];\r\n\r\n  // Filter to only show tabs that have content\r\n  const tabs = allTabs.filter(tab => tab.hasContent);\r\n\r\n  // Determine initial active tab - use the first available tab\r\n  const getInitialActiveTab = () => {\r\n    if (tabs.length === 0) return 'description'; // fallback if no tabs\r\n    return tabs[0].id;\r\n  };\r\n\r\n  const [activeTab, setActiveTab] = useState<'description' | 'specs' | 'reviews'>(getInitialActiveTab());\r\n\r\n  // Reset to first tab when product changes (e.g., navigating between products)\r\n  useEffect(() => {\r\n    setActiveTab(getInitialActiveTab());\r\n  }, [product.id]); // Reset when product ID changes\r\n\r\n  // If no tabs have content, don't render the component\r\n  if (tabs.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto\">\r\n      {/* Mobile: Horizontal Tabs */}\r\n      <div className=\"md:hidden\">\r\n        {/* Mobile Tab Navigation */}\r\n        <div className=\"flex overflow-x-auto mb-8 border-b border-stone-200 -mx-4 px-4\">\r\n          {tabs.map((tab) => {\r\n            const isActive = activeTab === tab.id;\r\n            \r\n            return (\r\n            <button\r\n              key={tab.id}\r\n              onClick={() => setActiveTab(tab.id as 'description' | 'specs' | 'reviews')}\r\n                className={`flex-shrink-0 flex items-center space-x-2 px-4 py-3 relative transition-all duration-300 ${\r\n                  isActive \r\n                    ? 'text-stone-900' \r\n                    : 'text-stone-600'\r\n                }`}\r\n              >\r\n                <div className={`transition-all duration-300 ${\r\n                  isActive \r\n                    ? 'text-stone-700' \r\n                    : 'text-stone-400'\r\n                }`}>\r\n                  {tab.icon}\r\n                </div>\r\n                <span className={`text-sm font-medium whitespace-nowrap ${\r\n                  isActive \r\n                    ? 'text-stone-900' \r\n                    : 'text-stone-600'\r\n                }`}>\r\n              {tab.label}\r\n                </span>\r\n                \r\n                {/* Active State Underline */}\r\n                {isActive && (\r\n                  <div className=\"absolute bottom-0 left-0 right-0 h-0.5 bg-stone-600\" />\r\n                )}\r\n            </button>\r\n            );\r\n          })}\r\n      </div>\r\n\r\n        {/* Mobile Content Area */}\r\n        <div className=\"pb-8\">\r\n          {activeTab === 'description' && (\r\n            <div>\r\n              <div className=\"prose prose-lg prose-stone max-w-none\">\r\n                <div className=\"text-base leading-relaxed text-stone-700 space-y-6\">\r\n                  <div className=\"whitespace-pre-wrap\">{cleanDescription}</div>\r\n                </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n          {activeTab === 'specs' && (\r\n            <div>\r\n              <div className=\"prose prose-lg prose-stone max-w-none\">\r\n                <div className=\"text-base leading-relaxed text-stone-700 space-y-4\">\r\n                  <div className=\"whitespace-pre-wrap\">{cleanSpecs}</div>\r\n                </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n          {activeTab === 'reviews' && (\r\n            <div>\r\n              <div className=\"space-y-12\">\r\n                {reviews.map((review: Review, index: number) => (\r\n                  <div key={index} className=\"relative\">\r\n                {review.excerpt && (\r\n                                              <div className=\"bg-warm-white rounded-2xl p-8 shadow-sm border border-stone-100 mb-8 relative transform hover:shadow-md transition-shadow duration-300\">\r\n                          {/* Subtle corner accent */}\r\n                          <div className=\"absolute top-0 left-0 w-1 h-16 bg-stone-300 rounded-l-2xl\"></div>\r\n                          \r\n                          <blockquote className=\"text-lg font-normal text-stone-700 leading-relaxed mb-6\">\r\n                            {review.excerpt}\r\n                          </blockquote>\r\n                          \r\n                          {/* Attribution inside the card */}\r\n                          <div className=\"flex flex-col sm:flex-row sm:items-center sm:space-x-6 space-y-2 sm:space-y-0 text-stone-600 pt-4 border-t border-stone-100\">\r\n                      {review.attribution && (\r\n                        <cite className=\"text-base font-semibold not-italic text-stone-800 tracking-wide\">\r\n                          {review.attribution}\r\n                        </cite>\r\n                      )}\r\n                      {review.date_of_review && (\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          <div className=\"w-1 h-1 bg-stone-400 rounded-full hidden sm:block\"></div>\r\n                          <span className=\"text-stone-500 text-sm font-medium tracking-wider uppercase\">\r\n                            {new Date(review.date_of_review).toLocaleDateString('en-US', {\r\n                              year: 'numeric',\r\n                              month: 'short',\r\n                              day: 'numeric'\r\n                            })}\r\n                          </span>\r\n                        </div>\r\n                      )}\r\n                      {review.link && (\r\n                        <a\r\n                          href={review.link}\r\n                          target=\"_blank\"\r\n                          rel=\"noopener noreferrer\"\r\n                          className=\"inline-flex items-center space-x-2 px-4 py-2 bg-stone-800 text-white rounded-full hover:bg-stone-900 transition-colors duration-200 text-sm font-light\"\r\n                        >\r\n                          <span>Read Full Review</span>\r\n                          <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\" />\r\n                          </svg>\r\n                        </a>\r\n                      )}\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                      \r\n                      {/* Attribution outside card if no excerpt */}\r\n                      {!review.excerpt && (\r\n                        <div className=\"flex flex-col sm:flex-row sm:items-center sm:space-x-6 space-y-2 sm:space-y-0 text-stone-600\">\r\n                          {review.attribution && (\r\n                            <cite className=\"text-base font-semibold not-italic text-stone-800 tracking-wide\">\r\n                              {review.attribution}\r\n                            </cite>\r\n                          )}\r\n                          {review.date_of_review && (\r\n                            <div className=\"flex items-center space-x-2\">\r\n                              <div className=\"w-1 h-1 bg-stone-400 rounded-full hidden sm:block\"></div>\r\n                              <span className=\"text-stone-500 text-sm font-medium tracking-wider uppercase\">\r\n                                {new Date(review.date_of_review).toLocaleDateString('en-US', {\r\n                                  year: 'numeric',\r\n                                  month: 'short',\r\n                                  day: 'numeric'\r\n                                })}\r\n                              </span>\r\n                            </div>\r\n                          )}\r\n                          {review.link && (\r\n                            <a\r\n                              href={review.link}\r\n                              target=\"_blank\"\r\n                              rel=\"noopener noreferrer\"\r\n                              className=\"inline-flex items-center space-x-2 px-4 py-2 bg-stone-800 text-white rounded-full hover:bg-stone-900 transition-colors duration-200 text-sm font-light\"\r\n                            >\r\n                              <span>Read Full Review</span>\r\n                              <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\" />\r\n                              </svg>\r\n                            </a>\r\n                          )}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n      {/* Desktop: Vertical Tabs (Preserve Original Design) */}\r\n      <div className=\"hidden md:block\">\r\n        <div className=\"flex min-h-[400px]\">\r\n          {/* Clean Vertical Tab Navigation */}\r\n          <div className=\"w-48 flex flex-col mr-16\">\r\n            {tabs.map((tab, index) => {\r\n              const isActive = activeTab === tab.id;\r\n              \r\n              return (\r\n                <button\r\n                  key={tab.id}\r\n                  onClick={() => setActiveTab(tab.id as 'description' | 'specs' | 'reviews')}\r\n                  className={`py-6 text-left transition-all duration-300 relative group cursor-pointer ${\r\n                    isActive \r\n                      ? 'text-stone-900' \r\n                      : 'text-stone-600 hover:text-stone-800'\r\n                  }`}\r\n                >\r\n                  {/* Just Icon and Label */}\r\n                  <div className=\"flex items-center space-x-3\">\r\n                    <div className={`transition-all duration-300 transform ${\r\n                      isActive \r\n                        ? 'text-stone-700' \r\n                        : 'text-stone-400 group-hover:text-stone-600 group-hover:scale-110'\r\n                    }`}>\r\n                      {tab.icon}\r\n                    </div>\r\n                    <span className={`text-base font-medium tracking-wide transition-all duration-300 ${\r\n                      isActive \r\n                        ? 'text-stone-900' \r\n                        : 'text-stone-600 group-hover:text-stone-800 group-hover:tracking-wider'\r\n                    }`}>\r\n                      {tab.label}\r\n                    </span>\r\n                  </div>\r\n                  \r\n                  {/* Active State Underline */}\r\n                  {isActive && (\r\n                    <div className=\"absolute bottom-2 left-0 right-0 h-px bg-stone-400 transition-all duration-300\" />\r\n                  )}\r\n                  \r\n                  {/* Hover State Underline Preview */}\r\n                  {!isActive && (\r\n                    <div className=\"absolute bottom-2 left-0 right-0 h-px bg-stone-300 transition-all duration-300 transform scale-x-0 group-hover:scale-x-75 origin-left\" />\r\n                  )}\r\n                </button>\r\n              );\r\n            })}\r\n          </div>\r\n\r\n          {/* Clean Vertical Divider */}\r\n          <div className=\"relative mr-16\">\r\n            <div className=\"absolute inset-y-0 left-0 w-px bg-stone-300\"></div>\r\n          </div>\r\n\r\n          {/* Desktop Content Area - Flat on page */}\r\n          <div className=\"flex-1\">\r\n            {activeTab === 'description' && (\r\n              <div>\r\n                <div className=\"prose prose-lg prose-stone max-w-none\">\r\n                  <div className=\"text-base leading-relaxed text-stone-700 space-y-6\">\r\n                    <div className=\"whitespace-pre-wrap\">{cleanDescription}</div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            {activeTab === 'specs' && (\r\n              <div>\r\n                <div className=\"prose prose-lg prose-stone max-w-none\">\r\n                  <div className=\"text-base leading-relaxed text-stone-700 space-y-4\">\r\n                    <div className=\"whitespace-pre-wrap\">{cleanSpecs}</div>\r\n                  </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n            {activeTab === 'reviews' && (\r\n              <div>\r\n                <div className=\"space-y-12\">\r\n                  {reviews.map((review: Review, index: number) => (\r\n                    <div key={index} className=\"relative\">\r\n                      {review.excerpt && (\r\n                        <div className=\"bg-warm-white rounded-2xl p-8 shadow-sm border border-stone-100 mb-6 relative transform hover:shadow-md transition-shadow duration-300\">\r\n                          {/* Subtle corner accent */}\r\n                          <div className=\"absolute top-0 left-0 w-1 h-16 bg-stone-300 rounded-l-2xl\"></div>\r\n                          \r\n                          <blockquote className=\"text-lg font-normal text-stone-700 leading-relaxed mb-6\">\r\n                            {review.excerpt}\r\n                          </blockquote>\r\n                          \r\n                          {/* Attribution inside the card */}\r\n                          <div className=\"flex items-center space-x-6 text-stone-600 pt-4 border-t border-stone-100\">\r\n                {review.attribution && (\r\n                          <cite className=\"text-base font-semibold not-italic text-stone-800 tracking-wide\">\r\n                            {review.attribution}\r\n                          </cite>\r\n                )}\r\n                {review.date_of_review && (\r\n                          <>\r\n                            <div className=\"w-1 h-1 bg-stone-400 rounded-full\"></div>\r\n                            <span className=\"text-stone-500 text-sm font-medium tracking-wider uppercase\">\r\n                              {new Date(review.date_of_review).toLocaleDateString('en-US', {\r\n                                year: 'numeric',\r\n                                month: 'short',\r\n                                day: 'numeric'\r\n                              })}\r\n                            </span>\r\n                          </>\r\n                )}\r\n                {review.link && (\r\n                  <a\r\n                    href={review.link}\r\n                    target=\"_blank\"\r\n                    rel=\"noopener noreferrer\"\r\n                            className=\"inline-flex items-center space-x-2 px-4 py-2 bg-stone-800 text-white rounded-full hover:bg-stone-900 transition-colors duration-200 text-sm font-light\"\r\n                  >\r\n                            <span>Read Full Review</span>\r\n                            <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\" />\r\n                            </svg>\r\n                  </a>\r\n                                        )}\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                      \r\n                      {/* Attribution outside card if no excerpt */}\r\n                      {!review.excerpt && (\r\n                        <div className=\"flex items-center space-x-6 text-stone-600\">\r\n                          {review.attribution && (\r\n                            <cite className=\"text-base font-semibold not-italic text-stone-800 tracking-wide\">\r\n                              {review.attribution}\r\n                            </cite>\r\n                          )}\r\n                          {review.date_of_review && (\r\n                            <>\r\n                              <div className=\"w-1 h-1 bg-stone-400 rounded-full\"></div>\r\n                              <span className=\"text-stone-500 text-sm font-medium tracking-wider uppercase\">\r\n                                {new Date(review.date_of_review).toLocaleDateString('en-US', {\r\n                                  year: 'numeric',\r\n                                  month: 'short',\r\n                                  day: 'numeric'\r\n                                })}\r\n                              </span>\r\n                            </>\r\n                          )}\r\n                          {review.link && (\r\n                            <a\r\n                              href={review.link}\r\n                              target=\"_blank\"\r\n                              rel=\"noopener noreferrer\"\r\n                              className=\"inline-flex items-center space-x-2 px-4 py-2 bg-stone-800 text-white rounded-full hover:bg-stone-900 transition-colors duration-200 text-sm font-light\"\r\n                            >\r\n                              <span>Read Full Review</span>\r\n                              <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14\" />\r\n                              </svg>\r\n                            </a>\r\n                          )}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}; ","import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate, Link } from 'react-router-dom';\r\nimport SEOHead from '../components/SEOHead';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { getProductBySlug, deleteProduct, getProductsByIds, getImageUrl } from '../lib/supabase';\r\nimport { Product } from '../lib/supabase';\r\nimport { ContextualCMS, CMSTrigger } from '../components/ContextualCMS';\r\nimport { ImageUpload } from '../components/ImageUpload';\r\nimport { RelationshipSelector } from '../components/RelationshipSelector';\r\nimport { DeleteConfirmation } from '../components/DeleteConfirmation';\r\nimport { ProductTabs, hasTabContent } from '../components/ProductTabs';\r\nimport { ProductEditForm } from '../components/ProductEditForm';\r\nimport { ProductCard } from '../components/ui/Card';\r\nimport { getRandomMusicalMessage } from '../utils/musicalLoadingMessages';\r\n\r\n\r\nexport const ProductDetail: React.FC = () => {\r\n  const { slug } = useParams<{ slug: string }>();\r\n  const navigate = useNavigate();\r\n  const { user } = useAuth();\r\n  const [product, setProduct] = useState<Product | null>(null);\r\n  const [pairsWellWithProducts, setPairsWellWithProducts] = useState<Product[]>([]);\r\n  const [alsoConsiderProducts, setAlsoConsiderProducts] = useState<Product[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [relatedLoading, setRelatedLoading] = useState(false);\r\n  const [isCMSOpen, setIsCMSOpen] = useState(false);\r\n  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);\r\n  const [deleteLoading, setDeleteLoading] = useState(false);\r\n  const [selectedImage, setSelectedImage] = useState<string | null>(null);\r\n  const [isImageModalOpen, setIsImageModalOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const loadProduct = async () => {\r\n      if (!slug) return;\r\n      \r\n      try {\r\n        const productData = await getProductBySlug(slug);\r\n        setProduct(productData);\r\n        \r\n        // Load cross-referenced products\r\n        if (productData) {\r\n          setRelatedLoading(true);\r\n          \r\n          // Load pairs_well_with products\r\n          if (productData.pairs_well_with && productData.pairs_well_with.length > 0) {\r\n            const pairsProducts = await getProductsByIds(productData.pairs_well_with);\r\n            setPairsWellWithProducts(pairsProducts);\r\n          }\r\n          \r\n          // Load also_consider products\r\n          if (productData.also_consider && productData.also_consider.length > 0) {\r\n            const alsoProducts = await getProductsByIds(productData.also_consider);\r\n            setAlsoConsiderProducts(alsoProducts);\r\n          }\r\n          \r\n          setRelatedLoading(false);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error loading product:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    loadProduct();\r\n  }, [slug]);\r\n\r\n  const handleEditSuccess = async () => {\r\n    // Reload product after successful update\r\n    if (slug) {\r\n      const productData = await getProductBySlug(slug);\r\n      setProduct(productData);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    if (!product) return;\r\n    \r\n    setDeleteLoading(true);\r\n    try {\r\n      const { error } = await deleteProduct(product.id);\r\n      if (error) {\r\n        console.error('Error deleting product:', error);\r\n        return;\r\n      }\r\n      \r\n      // Redirect to products page after successful deletion\r\n      navigate('/products');\r\n    } catch (error) {\r\n      console.error('Error deleting product:', error);\r\n    } finally {\r\n      setDeleteLoading(false);\r\n      setIsDeleteModalOpen(false);\r\n    }\r\n  };\r\n\r\n  const openImageModal = (imagePath: string) => {\r\n    setSelectedImage(imagePath);\r\n    setIsImageModalOpen(true);\r\n  };\r\n\r\n  const closeImageModal = () => {\r\n    setIsImageModalOpen(false);\r\n    setSelectedImage(null);\r\n  };\r\n\r\n  const formatPrice = (price?: number) => {\r\n    if (!price) return null;\r\n    return new Intl.NumberFormat('en-US', {\r\n      style: 'currency',\r\n      currency: 'USD',\r\n    }).format(price);\r\n  };\r\n\r\n  const getCallToActionButton = () => {\r\n    if (product?.available_for_demo) {\r\n      return (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          <Link\r\n            to={`/contact?product=${encodeURIComponent(product.title)}&manufacturer=${encodeURIComponent(product.manufacturer?.name || '')}&demo=home`}\r\n            className=\"bg-white border-2 border-stone-900 text-stone-900 py-4 px-6 font-medium tracking-wide hover:bg-stone-900 hover:text-white transition-all duration-300 text-center shadow-sm hover:shadow-md\"\r\n          >\r\n            <div className=\"flex items-center justify-center\">\r\n              <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\" />\r\n              </svg>\r\n              Home Demo\r\n            </div>\r\n          </Link>\r\n          <Link\r\n            to={`/contact?product=${encodeURIComponent(product.title)}&manufacturer=${encodeURIComponent(product.manufacturer?.name || '')}&demo=store`}\r\n            className=\"bg-stone-900 text-white py-4 px-6 font-medium tracking-wide hover:bg-stone-800 transition-all duration-300 text-center shadow-sm hover:shadow-md\"\r\n          >\r\n            <div className=\"flex items-center justify-center\">\r\n              <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-5 0H9m0 0H5m0 0h2M7 7h10M7 11h10M7 15h10\" />\r\n              </svg>\r\n              Store Demo\r\n            </div>\r\n          </Link>\r\n        </div>\r\n      );\r\n    }\r\n    \r\n\r\n    \r\n    if (product?.local_only) {\r\n      return (\r\n        <button className=\"w-full bg-stone-600 text-white py-3 px-6 rounded-lg hover:bg-stone-700 focus:outline-none focus:ring-2 focus:ring-stone-500 focus:ring-offset-2 font-medium\">\r\n          VIEW IN SHOWROOM\r\n        </button>\r\n      );\r\n    }\r\n    \r\n    return (\r\n      <button className=\"w-full bg-accent-600 text-white py-3 px-6 rounded-lg hover:bg-accent-700 focus:outline-none focus:ring-2 focus:ring-accent-500 focus:ring-offset-2 font-medium\">\r\n        CONTACT FOR PRICING\r\n      </button>\r\n    );\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-warm-white py-12\">\r\n        <div className=\"container-custom text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-accent-600 mx-auto\"></div>\r\n          <p className=\"mt-4 text-gray-600\">{getRandomMusicalMessage()}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!product) {\r\n    return (\r\n      <div className=\"min-h-screen bg-warm-white py-12\">\r\n        <div className=\"container-custom text-center\">\r\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-4\">Product Not Found</h1>\r\n          <p className=\"text-gray-600 mb-6\">The product you're looking for doesn't exist.</p>\r\n          <Link to=\"/products\" className=\"btn-primary\">\r\n            Back to Products\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-warm-white\">\r\n      <SEOHead\r\n        title={product.title}\r\n        description={`${product.title} by ${product.manufacturer?.name || 'Premium Audio'}. ${product.brief_description || 'High-end audio equipment available at Fidelis Audio, New Hampshire.'}`}\r\n        canonical={`/products/${product.slug}`}\r\n        type=\"product\"\r\n        productData={{\r\n          price: product.price?.toString(),\r\n          availability: 'InStock',\r\n          brand: product.manufacturer?.name,\r\n          category: product.category?.name\r\n        }}\r\n        image={product.images?.[0] ? getImageUrl(product.images[0]) : undefined}\r\n      />\r\n      \r\n      {/* Premium Hero Section */}\r\n      <div className=\"relative bg-warm-beige border-b border-stone-200 -mt-4\">\r\n        <div className=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-16 lg:py-24\">\r\n\r\n\r\n          {/* Admin Actions */}\r\n          {user && (\r\n            <div className=\"absolute top-8 right-8 flex space-x-3\">\r\n              <CMSTrigger\r\n                onClick={() => setIsCMSOpen(true)}\r\n                label=\"Edit Product\"\r\n                context=\"product\"\r\n              />\r\n              <button\r\n                onClick={() => setIsDeleteModalOpen(true)}\r\n                className=\"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition-all duration-200 text-sm font-medium\"\r\n              >\r\n                Delete Product\r\n              </button>\r\n            </div>\r\n          )}\r\n\r\n          {/* Product Header */}\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center\">\r\n            {/* Product Images */}\r\n            <div className=\"space-y-6\">\r\n              {/* Main Image - Now sits directly on background */}\r\n              <div className=\"relative group\">\r\n                {product.product_hero_image ? (\r\n                  <div className=\"relative\">\r\n                    <img\r\n                      src={getImageUrl(product.product_hero_image)}\r\n                      alt={product.title}\r\n                      className=\"w-full h-auto max-h-[600px] object-contain mix-blend-multiply\"\r\n                    />\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"w-full h-[500px] bg-gradient-to-br from-stone-100 to-stone-200 rounded-2xl flex items-center justify-center border-2 border-dashed border-stone-300\">\r\n                    <div className=\"text-center\">\r\n                      <svg className=\"h-16 w-16 text-stone-400 mx-auto mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\r\n                      </svg>\r\n                      <p className=\"text-stone-500 font-medium\">No image available</p>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Thumbnail Gallery */}\r\n              {product.product_gallery && product.product_gallery.length > 0 && (\r\n                <div className=\"grid grid-cols-4 gap-4\">\r\n                  {product.product_gallery.map((imagePath, index) => (\r\n                    <div\r\n                      key={index}\r\n                      className=\"relative group cursor-pointer overflow-hidden rounded-xl bg-warm-white shadow-md\"\r\n                      onClick={() => openImageModal(imagePath)}\r\n                    >\r\n                      <img\r\n                        src={getImageUrl(imagePath)}\r\n                        alt={`${product.title} - Image ${index + 1}`}\r\n                        className=\"w-full h-24 object-cover transition-transform duration-300 group-hover:scale-110\"\r\n                      />\r\n                      <div className=\"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-200\" />\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Product Information */}\r\n            <div className=\"space-y-10\">\r\n              {/* Category and Manufacturer Badges - Premium Design */}\r\n              <div className=\"flex flex-wrap gap-4\">\r\n                {product.categories && (\r\n                  <Link\r\n                    to={`/products/list?category=${product.categories.id}`}\r\n                    className=\"inline-flex items-center px-6 py-3 bg-stone-900 text-white text-sm font-medium tracking-wide uppercase hover:bg-stone-800 transition-all duration-300 shadow-lg hover:shadow-xl\"\r\n                  >\r\n                    {product.categories.name}\r\n                  </Link>\r\n                )}\r\n                {product.manufacturer && (\r\n                  <Link\r\n                    to={`/manufacturers/${product.manufacturer.slug}`}\r\n                    className=\"inline-flex items-center px-6 py-3 border-2 border-stone-900 text-stone-900 text-sm font-medium tracking-wide uppercase hover:bg-stone-900 hover:text-white transition-all duration-300\"\r\n                  >\r\n                    {product.manufacturer.name}\r\n                  </Link>\r\n                )}\r\n              </div>\r\n\r\n              {/* Product Title - Larger and More Prominent */}\r\n              <div>\r\n                <h1 className=\"text-6xl lg:text-7xl xl:text-8xl font-extralight text-stone-900 leading-none tracking-tighter mb-6\">\r\n                  {product.title}\r\n                </h1>\r\n                {product.manufacturer && (\r\n                  <p className=\"text-2xl lg:text-3xl text-stone-600 font-light tracking-wide\">\r\n                    by{' '}\r\n                    <Link\r\n                      to={`/manufacturers/${product.manufacturer.slug}`}\r\n                      className=\"hover:text-stone-900 transition-colors duration-300 border-b border-stone-300 hover:border-stone-900\"\r\n                    >\r\n                      {product.manufacturer.name}\r\n                    </Link>\r\n                  </p>\r\n                )}\r\n              </div>\r\n\r\n              {/* Price Display */}\r\n              {product.show_price && product.price && (\r\n                <div className=\"text-4xl font-light text-stone-900\">\r\n                  {formatPrice(product.price)}\r\n                </div>\r\n              )}\r\n\r\n              {/* Sophisticated Call to Action */}\r\n              <div className=\"pt-6 space-y-4\">\r\n                {getCallToActionButton()}\r\n              </div>\r\n\r\n              {/* Product Tags */}\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                {product.featured && (\r\n                  <span className=\"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800\">\r\n                    Featured\r\n                  </span>\r\n                )}\r\n                {!product.published && (\r\n                  <span className=\"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800\">\r\n                    Unpublished\r\n                  </span>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Content Sections */}\r\n      <div className=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-16\">\r\n        {/* Quote/Testimonial Section - Timeline-style Layout */}\r\n        {product.quote && (\r\n          <div className=\"mb-32 flex flex-col items-center\">\r\n            {/* Top vertical line - above quote */}\r\n            <div className=\"w-px h-32 bg-stone-300 mb-16\"></div>\r\n            \r\n            <div className=\"max-w-4xl mx-auto px-8 text-center\">\r\n              <blockquote>\r\n                {/* Main quote - clean and severe */}\r\n                <div className=\"text-2xl lg:text-3xl xl:text-4xl font-light text-stone-900 leading-[1.4] tracking-wide mb-12\">\r\n                  {product.quote}\r\n                </div>\r\n              </blockquote>\r\n              \r\n              {/* Attribution - minimal and refined */}\r\n              {product.quote_attribution && (\r\n                <div className=\"mt-16\">\r\n                  <div className=\"text-sm text-stone-500 font-light tracking-[0.3em] uppercase\">\r\n                    — {product.quote_attribution}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n            \r\n            {/* Bottom vertical line - below quote */}\r\n            <div className=\"w-px h-32 bg-stone-300 mt-16\"></div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Tabbed Content - only show if there are tabs with content */}\r\n        {hasTabContent(product) && (\r\n          <div className=\"mb-32\">\r\n            <ProductTabs product={product} />\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Pairs Well With Products */}\r\n      {pairsWellWithProducts.length > 0 && (\r\n        <div className=\"bg-warm-beige py-12 pb-20\">\r\n          <div className=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n            <div className=\"mb-12\">\r\n              <div className=\"flex items-center\">\r\n                <div className=\"flex-grow border-t border-stone-300\"></div>\r\n                <div className=\"mx-6 bg-warm-beige px-4\">\r\n                  <span className=\"text-lg font-medium text-stone-600 tracking-wide uppercase\">Good synergies with {product.manufacturer?.name}'s <span className=\"font-bold\">{product.title}</span></span>\r\n                </div>\r\n                <div className=\"flex-grow border-t border-stone-300\"></div>\r\n              </div>\r\n            </div>\r\n          \r\n            {relatedLoading ? (\r\n              <div className=\"text-center py-16\">\r\n                <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-stone-600 mx-auto mb-4\"></div>\r\n                <p className=\"text-stone-600\">{getRandomMusicalMessage()}</p>\r\n              </div>\r\n            ) : (\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-x-6 gap-y-10\">\r\n                {pairsWellWithProducts.map((relatedProduct: Product) => (\r\n                  <Link key={relatedProduct.id} to={`/products/${relatedProduct.slug}`} className=\"block h-full\">\r\n                    <ProductCard\r\n                      product={{\r\n                        id: relatedProduct.id,\r\n                        title: relatedProduct.title,\r\n                        price: relatedProduct.price,\r\n                        manufacturer: relatedProduct.manufacturer,\r\n                        product_hero_image: relatedProduct.product_hero_image,\r\n                        categories: relatedProduct.categories,\r\n                        featured: relatedProduct.featured\r\n                      }}\r\n                      showCategory={false}\r\n                    />\r\n                  </Link>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Also Consider Products */}\r\n      {alsoConsiderProducts.length > 0 && (\r\n        <div className=\"bg-warm-beige py-12 pb-20\">\r\n          <div className=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n            <div className=\"mb-12\">\r\n              <div className=\"flex items-center\">\r\n                <div className=\"flex-grow border-t border-stone-300\"></div>\r\n                <div className=\"mx-6 bg-warm-beige px-4\">\r\n                  <span className=\"text-lg font-medium text-stone-600 tracking-wide uppercase\">Also consider</span>\r\n                </div>\r\n                <div className=\"flex-grow border-t border-stone-300\"></div>\r\n              </div>\r\n            </div>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-x-6 gap-y-10\">\r\n              {alsoConsiderProducts.map((relatedProduct: Product) => (\r\n                <Link key={relatedProduct.id} to={`/products/${relatedProduct.slug}`} className=\"block h-full\">\r\n                  <ProductCard\r\n                    product={{\r\n                      id: relatedProduct.id,\r\n                      title: relatedProduct.title,\r\n                      price: relatedProduct.price,\r\n                      manufacturer: relatedProduct.manufacturer,\r\n                      product_hero_image: relatedProduct.product_hero_image,\r\n                      categories: relatedProduct.categories,\r\n                      featured: relatedProduct.featured\r\n                    }}\r\n                    showCategory={false}\r\n                  />\r\n                </Link>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Image Modal */}\r\n      {isImageModalOpen && selectedImage && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50\" onClick={closeImageModal}>\r\n          <div className=\"relative max-w-4xl max-h-full p-4\">\r\n            <img\r\n              src={getImageUrl(selectedImage)}\r\n              alt={product.title}\r\n              className=\"max-w-full max-h-full object-contain\"\r\n            />\r\n            <button\r\n              onClick={closeImageModal}\r\n              className=\"absolute top-4 right-4 text-white hover:text-gray-300\"\r\n            >\r\n              <svg className=\"w-8 h-8\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n              </svg>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Contextual CMS */}\r\n      <ContextualCMS\r\n        isOpen={isCMSOpen}\r\n        onClose={() => setIsCMSOpen(false)}\r\n        title={`Edit ${product?.title || 'Product'}`}\r\n        context=\"product\"\r\n      >\r\n        {product && (\r\n          <ProductEditForm\r\n            product={product}\r\n            onSave={handleEditSuccess}\r\n            onCancel={() => setIsCMSOpen(false)}\r\n          />\r\n        )}\r\n      </ContextualCMS>\r\n\r\n      {/* Delete Confirmation Modal */}\r\n      <DeleteConfirmation\r\n        isOpen={isDeleteModalOpen}\r\n        onClose={() => setIsDeleteModalOpen(false)}\r\n        onConfirm={handleDelete}\r\n        title=\"Delete Product\"\r\n        message={`Are you sure you want to delete \"${product.title}\"? This action cannot be undone.`}\r\n        loading={deleteLoading}\r\n      />\r\n    </div>\r\n  );\r\n};"],"names":["CloudArrowUpIcon","title","titleId","props","svgRef","React.createElement","ForwardRef","React.forwardRef","Cog6ToothIcon","XMarkIcon","ContextualCMS","isOpen","onClose","children","context","useEffect","jsx","AnimatePresence","jsxs","Fragment","motion","CMSTrigger","onClick","label","className","ImageUpload","onUpload","onRemove","currentImage","multiple","folder","isDragging","setIsDragging","useState","uploading","setUploading","uploadedImages","setUploadedImages","fileInputRef","useRef","handleDragOver","useCallback","e","handleDragLeave","handleDrop","files","handleFiles","handleFileSelect","imageFiles","file","uploadPromises","uploadImage","uploadedUrls","prev","url","error","removeImage","index","newImages","_","i","imageUrl","getImageUrl","RelationshipSelector","selectedIds","onSelectionChange","excludeProductId","placeholder","setIsOpen","searchTerm","setSearchTerm","products","setProducts","loading","setLoading","productsData","getProductsWithCategories","filteredProducts","product","matchesSearch","notExcluded","notAlreadySelected","selectedProducts","addProduct","productId","removeProduct","id","MagnifyingGlassIcon","ProductEditForm","onSave","onCancel","formData","setFormData","reviews","setReviews","categories","setCategories","manufacturers","setManufacturers","activeTab","setActiveTab","parsed","categoriesData","manufacturersData","getProductCategories","getManufacturers","handleInputChange","field","value","addReview","newReview","updateReview","review","removeReview","handleSave","updateData","updateProduct","tabs","tab","ids","DeleteConfirmation","onConfirm","message","containsHtmlTags","content","cleanHtmlContent","htmlString","extractTextFromStatamicContent","item","text","key","hasTabContent","cleanDescription","description","cleanSpecs","specs","ProductTabs","parseDescription","parseSpecs","parseReviews","excerptText","textItem","getInitialActiveTab","isActive","ProductDetail","slug","useParams","navigate","useNavigate","user","useAuth","setProduct","pairsWellWithProducts","setPairsWellWithProducts","alsoConsiderProducts","setAlsoConsiderProducts","relatedLoading","setRelatedLoading","isCMSOpen","setIsCMSOpen","isDeleteModalOpen","setIsDeleteModalOpen","deleteLoading","setDeleteLoading","selectedImage","setSelectedImage","isImageModalOpen","setIsImageModalOpen","productData","getProductBySlug","pairsProducts","getProductsByIds","alsoProducts","handleEditSuccess","handleDelete","deleteProduct","openImageModal","imagePath","closeImageModal","formatPrice","price","getCallToActionButton","Link","SEOHead","relatedProduct","ProductCard"],"mappings":"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","x_google_ignoreList":[0,1,2]}