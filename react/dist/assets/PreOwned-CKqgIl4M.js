import{r,j as e,m as P,S as x,C as u,L as E,G as I,f as L,h as T,F as O,v as V,I as F,V as g,J as q,l as W}from"./index-BMdrBsqe.js";import{g as z}from"./musicalLoadingMessages-DPXwYOsx.js";import{F as A}from"./MagnifyingGlassIcon-DwVeHt5Q.js";const R=()=>{const[f,p]=r.useState([]),[i,m]=r.useState([]),[b,N]=r.useState(!0),[l,v]=r.useState(""),[h,S]=r.useState(!1),[k,w]=r.useState(!0),[C,o]=r.useState([]);return r.useEffect(()=>{(async()=>{try{const t=await q();p(t),m(t);const d=t.map(a=>new Promise(n=>{if(a.images&&a.images.length>0){const c=new Image;c.onload=()=>n(),c.onerror=()=>n(),c.src=W(a.images[0])}else n()}));await Promise.race([Promise.all(d),new Promise(a=>setTimeout(a,3e3))]),o(new Array(t.length).fill(!1)),w(!1),setTimeout(()=>{t.forEach((a,n)=>{setTimeout(()=>{o(c=>{const y=[...c];return y[n]=!0,y})},n*80)})},200)}catch(t){console.error("Error loading pre-owned data:",t),p([]),m([]),w(!1)}finally{N(!1)}})()},[]),r.useEffect(()=>{let s=f;l&&(s=s.filter(t=>t.title.toLowerCase().includes(l.toLowerCase())||t.description?.toLowerCase().includes(l.toLowerCase()))),h&&(s=s.filter(t=>t.local_only)),m(s),s.length!==i.length&&(o(new Array(s.length).fill(!1)),setTimeout(()=>{s.forEach((t,d)=>{setTimeout(()=>{o(j=>{const a=[...j];return a[d]=!0,a})},d*60)})},100))},[f,l,h,i.length]),b||k?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#fffcf9]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-accent-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:z()})]})}):e.jsxs(P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},className:"min-h-screen bg-[#fffcf9]",children:[e.jsx(x,{variant:"hero",background:"custom",customBackground:"bg-warm-beige",className:"-mt-4",children:e.jsx(u,{size:"6xl",children:e.jsxs("div",{className:"max-w-4xl",children:[e.jsx("h1",{className:"text-4xl lg:text-5xl xl:text-6xl font-light text-stone-900 leading-tight tracking-wide mb-6",children:"Pre-Owned Equipment"}),e.jsx("div",{className:"prose prose-stone prose-lg max-w-none text-stone-700 leading-relaxed",children:"Discover exceptional value on carefully inspected, high-end audio equipment with significant savings."})]})})}),e.jsx(x,{variant:"compact",background:"custom",customBackground:"bg-[#fffcf9]",children:e.jsx(u,{size:"6xl",children:i.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-4",children:[e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search...",value:l,onChange:s=>v(s.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-accent-500 focus:border-transparent transition-all duration-300 bg-white"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer whitespace-nowrap",children:[e.jsx("input",{type:"checkbox",checked:h,onChange:s=>S(s.target.checked),className:"rounded border-gray-300 text-accent-600 focus:ring-accent-500"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Local pickup only"})]})]}),e.jsxs("p",{className:"text-gray-600",children:["Showing ",i.length," pre-owned item",i.length!==1?"s":""]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-10",children:i.map((s,t)=>e.jsx(E,{to:`/pre-owned/${s.id}`,className:"block h-full group",children:e.jsx(I,{item:s,className:"h-full",index:t,isVisible:C[t]||!1})},s.id))})]}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🔍"}),e.jsx(L,{className:"mb-2",children:"No items found"}),e.jsx(T,{className:"text-gray-600",children:"Try adjusting your search criteria or check back later for new arrivals."})]})})}),e.jsx(x,{variant:"compact",background:"white",children:e.jsx(u,{size:"6xl",children:e.jsxs(O,{direction:"col",align:"center",className:"max-w-4xl mx-auto",children:[e.jsx(V,{className:"text-center mb-8",children:"Why Choose Pre-Owned?"}),e.jsxs(F,{cols:3,gap:"xl",children:[e.jsx(g,{value:{icon:"🏷️",title:"Exceptional Value",description:"Significant savings on high-end audio equipment that maintains its performance and quality."}}),e.jsx(g,{value:{icon:"📦",title:"Carefully Inspected",description:"Each item is thoroughly tested and inspected to ensure it meets our quality standards."}}),e.jsx(g,{value:{icon:"🚚",title:"Warranty Available",description:"Many pre-owned items come with warranty coverage for your peace of mind."}})]})]})})})]})};export{R as PreOwned};
//# sourceMappingURL=PreOwned-CKqgIl4M.js.map
