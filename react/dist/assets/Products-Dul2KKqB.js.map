{"version":3,"file":"Products-Dul2KKqB.js","sources":["../../src/pages/Products.tsx"],"sourcesContent":["/**\n * @preserve-visual-language\n * DO NOT MODIFY: Styling, layout, or visual presentation\n * Only modify: Functionality, data handling, or performance\n * \n * Visual Language:\n * - Colors: Primary blue, accent gold, neutral grays\n * - Typography: Inter font, established scale\n * - Spacing: 4px base unit system\n * - Layout: Responsive grid, consistent padding\n */\n\nimport React, { useState, useEffect } from 'react';\nimport { Link, useSearchParams, useNavigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport { getProductsWithCategories, getProductCategories, getManufacturers, getImageUrl } from '../lib/supabase';\nimport { Product, ProductCategory, Manufacturer } from '../lib/supabase';\n// Removed ProductForm import as this page no longer mounts it directly\nimport { ProductCard, Section, Grid, Container, Flex, H1, H2, H3, H4, Body, BodySmall, Caption, Button, Card, Price } from '../components/ui';\nimport { getRandomMusicalMessage } from '../utils/musicalLoadingMessages';\n\nconst Products: React.FC = () => {\n  const [searchParams, setSearchParams] = useSearchParams();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [products, setProducts] = useState<Product[]>([]);\n  const [categories, setCategories] = useState<ProductCategory[]>([]);\n  const [manufacturers, setManufacturers] = useState<Manufacturer[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedCategory, setSelectedCategory] = useState<string>(searchParams.get('category') || '');\n  const [selectedManufacturer, setSelectedManufacturer] = useState<string>(searchParams.get('manufacturer') || '');\n  const [sortBy, setSortBy] = useState<string>(searchParams.get('sort') || 'price-low');\n  // Removed isProductFormOpen state since this page no longer opens the form\n  const [showAllManufacturers, setShowAllManufacturers] = useState(false);\n  const [showAllCategories, setShowAllCategories] = useState(false);\n  const [maxVisibleItems, setMaxVisibleItems] = useState(6);\n  const { user } = useAuth();\n\n  // Calculate dynamic truncation based on viewport height\n  useEffect(() => {\n    const calculateMaxItems = () => {\n      const viewportHeight = window.innerHeight;\n      const headerHeight = 80; // Approximate header height\n      const filterHeaderHeight = 120; // \"Filters\" title + spacing\n      const sortingHeight = 200; // Sorting controls + spacing\n      const buttonHeight = 40; // \"Show More\" button height\n      const padding = 100; // Extra padding for breathing room\n      \n      // Available height for filter lists\n      const availableHeight = viewportHeight - headerHeight - filterHeaderHeight - sortingHeight - buttonHeight - padding;\n      \n      // Each filter item is approximately 40px (32px + 8px spacing)\n      const itemHeight = 40;\n      const maxItems = Math.max(4, Math.floor(availableHeight / (itemHeight * 2))); // Divide by 2 since we have 2 filter sections\n      \n      setMaxVisibleItems(Math.min(maxItems, 12)); // Cap at 12 for very large screens\n    };\n\n    calculateMaxItems();\n    window.addEventListener('resize', calculateMaxItems);\n    \n    return () => window.removeEventListener('resize', calculateMaxItems);\n  }, []);\n\n  // Load data\n  useEffect(() => {\n    const loadData = async () => {\n      try {\n        const [productsData, categoriesData, manufacturersData] = await Promise.all([\n          getProductsWithCategories(),\n          getProductCategories(),\n          getManufacturers(),\n        ]);\n\n        setProducts(productsData);\n        setCategories(categoriesData);\n        setManufacturers(manufacturersData);\n      } catch (error) {\n        console.error('Error loading data:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    loadData();\n  }, []);\n\n  // Watch for URL parameter changes\n  useEffect(() => {\n    const categoryFromUrl = searchParams.get('category') || '';\n    const manufacturerFromUrl = searchParams.get('manufacturer') || '';\n    const sortFromUrl = searchParams.get('sort') || 'price-low';\n\n    setSelectedCategory(categoryFromUrl);\n    setSelectedManufacturer(manufacturerFromUrl);\n    setSortBy(sortFromUrl);\n  }, [searchParams]);\n\n  // Handle filter changes\n  const handleFilterChange = (type: 'category' | 'manufacturer' | 'sort', value: string) => {\n    const newSearchParams = new URLSearchParams(searchParams);\n    \n    if (type === 'category') {\n      if (value) {\n        newSearchParams.set('category', value);\n      } else {\n        newSearchParams.delete('category');\n      }\n      setSelectedCategory(value);\n    } else if (type === 'manufacturer') {\n      if (value) {\n        newSearchParams.set('manufacturer', value);\n      } else {\n        newSearchParams.delete('manufacturer');\n      }\n      setSelectedManufacturer(value);\n    } else if (type === 'sort') {\n      newSearchParams.set('sort', value);\n      setSortBy(value);\n    }\n    \n    setSearchParams(newSearchParams);\n    \n    // Reset scroll position to top of products grid when filters change\n    if (type === 'manufacturer' || type === 'category' || type === 'sort') {\n      setTimeout(() => {\n        const productsGrid = document.querySelector('.products-grid');\n        if (productsGrid) {\n          const navHeight = 80; // Approximate navigation height\n          const elementTop = productsGrid.getBoundingClientRect().top + window.pageYOffset;\n          const offsetPosition = elementTop - navHeight - 20; // Extra 20px for breathing room\n          \n          window.scrollTo({\n            top: offsetPosition,\n            behavior: 'smooth'\n          });\n        }\n      }, 100); // Small delay to ensure state updates have processed\n    }\n  };\n\n  const handleProductFormSuccess = async () => {\n    // No-op for now; retained for potential future use\n    try {\n      const [productsData, categoriesData, manufacturersData] = await Promise.all([\n        getProductsWithCategories(),\n        getProductCategories(),\n        getManufacturers(),\n      ]);\n\n      setProducts(productsData);\n      setCategories(categoriesData);\n      setManufacturers(manufacturersData);\n    } catch (error) {\n      console.error('Error reloading data:', error);\n    }\n  };\n\n  // Filter and sort products\n  let filteredProducts = products;\n\n  if (selectedCategory) {\n    filteredProducts = filteredProducts.filter(product => \n      product.categories?.id === selectedCategory\n    );\n  }\n\n  if (selectedManufacturer) {\n    filteredProducts = filteredProducts.filter(product => \n      (typeof product.manufacturer === 'object' && product.manufacturer?.id === selectedManufacturer)\n    );\n  }\n\n  // Sorting\n  const sortedProducts = [...filteredProducts].sort((a, b) => {\n    const priceA = a.price || 0;\n    const priceB = b.price || 0;\n\n    if (sortBy === 'price-high') return priceB - priceA;\n    return priceA - priceB; // default low to high\n  });\n\n  // Show loading spinner if data is still loading\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-warm-white\">\n        <div className=\"pt-28\">\n          <div className=\"flex items-center justify-center min-h-[50vh]\">\n            <div className=\"text-center\">\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-stone-600 mx-auto\"></div>\n              <p className=\"mt-4 text-stone-600\">{getRandomMusicalMessage()}</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div>\n      {/* Filters */}\n      <Section variant=\"hero\" background=\"custom\" customBackground=\"bg-warm-beige\" className=\"-mt-4\">\n        <Container size=\"6xl\">\n          <div className=\"max-w-4xl\">\n            <h1 className=\"text-4xl lg:text-5xl xl:text-6xl font-light text-stone-900 leading-tight tracking-wide mb-6\">\n              {selectedCategory\n                ? categories.find(c => c.id === selectedCategory)?.name || 'Products'\n                : 'Products'\n              }\n            </h1>\n             \n            {selectedCategory ? (\n              <div className=\"space-y-6\">\n                <div className=\"prose prose-stone prose-lg max-w-none text-stone-700 leading-relaxed\">\n                  {categories.find(c => c.id === selectedCategory)?.category_description || `Browse our ${categories.find(c => c.id === selectedCategory)?.name?.toLowerCase()} collection`}\n                </div>\n                \n                <Link\n                  to=\"/products/list\"\n                  className=\"inline-flex items-center px-6 py-3 border-2 border-stone-900 text-stone-900 font-medium tracking-wide hover:bg-stone-900 hover:text-white transition-all duration-300\"\n                >\n                  <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n                  </svg>\n                  View All Products\n                </Link>\n                \n                {user && (\n                  <div className=\"mt-4\">\n                    <Button\n                      onClick={() => navigate('/products/new')}\n                      variant=\"primary\"\n                      size=\"sm\"\n                    >\n                      Add Product\n                    </Button>\n                  </div>\n                )}\n              </div>\n            ) : (\n              <div className=\"space-y-6\">\n                <div className=\"prose prose-stone prose-lg max-w-none text-stone-700 leading-relaxed\">\n                  <p className=\"mb-6\">\n                    As America's premiere importer of high-end audio gear, we source and import the world's finest equipment directly from manufacturers. What you'll find here comes from decades of relationships with the most respected names in audio, sold through our New Hampshire store and distributed nationwide through our dealer network.\n                  </p>\n                  <p className=\"mb-6\">\n                    In a world of warehouses and return policies that don't support manufacturers, we believe in curation, guidance, and real service. Every recommendation comes from hands-on experience with the gear, not algorithms or sales targets. We're here to help you navigate choices that matter, backed by expertise you can trust.\n                  </p>\n                  <p>\n                    We host listening events, maintain one of New England's finest record collections, and believe the best audio discoveries happen through conversation. Come by the store, bring your favorite music, and experience the difference that genuine expertise and passion make.\n                  </p>\n                </div>\n                \n                {user && (\n                  <Button\n                    onClick={() => navigate('/products/new')}\n                    variant=\"primary\"\n                    size=\"sm\"\n                  >\n                    Add Product\n                  </Button>\n                )}\n              </div>\n            )}\n          </div>\n        </Container>\n      </Section>\n\n      {/* Main Content with Sidebar */}\n      <Section variant=\"default\" background=\"custom\" customBackground=\"bg-warm-white\">\n        <Container size=\"6xl\">\n          <div className=\"flex flex-col lg:flex-row gap-8\">\n                         {/* Sidebar Filters */}\n             <div className=\"lg:w-80 lg:flex-shrink-0 pt-16\">\n               <div className=\"lg:sticky lg:top-32\">\n\n                 <div className=\"space-y-8\">\n                                     {!selectedCategory && (\n                    <div>\n                      <label className=\"block text-base font-semibold text-stone-900 mb-4\">\n                        Filter by Category\n                      </label>\n                      <div className=\"space-y-2\">\n                        <label className=\"flex items-center space-x-3 cursor-pointer group\">\n                          <div className=\"relative\">\n                            <input\n                              type=\"radio\"\n                              name=\"category\"\n                              value=\"\"\n                              checked={selectedCategory === ''}\n                              onChange={(e) => handleFilterChange('category', e.target.value)}\n                              className=\"sr-only\"\n                            />\n                            <div className={`w-4 h-4 rounded-full border-2 transition-all duration-200 ${\n                              selectedCategory === '' \n                                ? 'border-primary-600 bg-primary-600' \n                                : 'border-stone-300 group-hover:border-stone-400'\n                            }`}>\n                              {selectedCategory === '' && (\n                                <div className=\"w-2 h-2 bg-white rounded-full absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2\"></div>\n                              )}\n                            </div>\n                          </div>\n                          <span className=\"text-stone-700 group-hover:text-stone-900 transition-colors\">All Categories</span>\n                        </label>\n                        \n                        {(() => {\n                          // Show dynamic number of categories based on viewport height, or all if expanded\n                          const displayedCategories = showAllCategories \n                            ? categories \n                            : categories.slice(0, maxVisibleItems);\n\n                          return (\n                            <>\n                              <div className={showAllCategories ? \"max-h-64 overflow-y-auto pr-2 space-y-2\" : \"space-y-2\"}>\n                                {displayedCategories.map(category => (\n                                  <label key={category.id} className=\"flex items-center space-x-3 cursor-pointer group\">\n                                    <div className=\"relative\">\n                                      <input\n                                        type=\"radio\"\n                                        name=\"category\"\n                                        value={category.id}\n                                        checked={selectedCategory === category.id}\n                                        onChange={(e) => handleFilterChange('category', e.target.value)}\n                                        className=\"sr-only\"\n                                      />\n                                      <div className={`w-4 h-4 rounded-full border-2 transition-all duration-200 ${\n                                        selectedCategory === category.id \n                                          ? 'border-primary-600 bg-primary-600' \n                                          : 'border-stone-300 group-hover:border-stone-400'\n                                      }`}>\n                                        {selectedCategory === category.id && (\n                                          <div className=\"w-2 h-2 bg-white rounded-full absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2\"></div>\n                                        )}\n                                      </div>\n                                    </div>\n                                    <span className=\"text-stone-700 group-hover:text-stone-900 transition-colors\">{category.name}</span>\n                                  </label>\n                                ))}\n                              </div>\n                              \n                              {categories.length > maxVisibleItems && (\n                                <button\n                                  onClick={() => setShowAllCategories(!showAllCategories)}\n                                  className=\"text-sm text-stone-700 hover:text-stone-900 font-medium transition-colors mt-2 underline decoration-stone-300 hover:decoration-stone-600\"\n                                >\n                                  {showAllCategories \n                                    ? `Show Less (${categories.length - maxVisibleItems} fewer)` \n                                    : `Show More (${categories.length - maxVisibleItems} more)`\n                                  }\n                                </button>\n                              )}\n                            </>\n                          );\n                        })()}\n                      </div>\n                    </div>\n                  )}\n\n                                       <div>\n                      <label className=\"block text-base font-semibold text-stone-900 mb-4\">\n                        Filter by Manufacturer\n                      </label>\n                                             <div className=\"space-y-2\">\n                         <label className=\"flex items-center space-x-3 cursor-pointer group\">\n                           <div className=\"relative\">\n                             <input\n                               type=\"radio\"\n                               name=\"manufacturer\"\n                               value=\"\"\n                               checked={selectedManufacturer === ''}\n                               onChange={(e) => handleFilterChange('manufacturer', e.target.value)}\n                               className=\"sr-only\"\n                             />\n                             <div className={`w-4 h-4 rounded-full border-2 transition-all duration-200 ${\n                               selectedManufacturer === '' \n                                 ? 'border-primary-600 bg-primary-600' \n                                 : 'border-stone-300 group-hover:border-stone-400'\n                             }`}>\n                               {selectedManufacturer === '' && (\n                                 <div className=\"w-2 h-2 bg-white rounded-full absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2\"></div>\n                               )}\n                             </div>\n                           </div>\n                           <span className=\"text-stone-700 group-hover:text-stone-900 transition-colors\">All Manufacturers</span>\n                         </label>\n                         \n                         {(() => {\n                           // Filter manufacturers to only show those with products in the current category\n                           const relevantManufacturers = selectedCategory\n                             ? manufacturers.filter(manufacturer =>\n                                 products.some(product =>\n                                   product.manufacturer?.id === manufacturer.id &&\n                                   product.categories?.id === selectedCategory\n                                 )\n                               )\n                             : manufacturers;\n\n                           // Show dynamic number of manufacturers based on viewport height, or all if expanded\n                           const displayedManufacturers = showAllManufacturers \n                             ? relevantManufacturers \n                             : relevantManufacturers.slice(0, maxVisibleItems);\n\n                           return (\n                             <>\n                               <div className={showAllManufacturers ? \"max-h-64 overflow-y-auto pr-2 space-y-2\" : \"space-y-2\"}>\n                                 {displayedManufacturers.map(manufacturer => (\n                                   <label key={manufacturer.id} className=\"flex items-center space-x-3 cursor-pointer group\">\n                                     <div className=\"relative\">\n                                       <input\n                                         type=\"radio\"\n                                         name=\"manufacturer\"\n                                         value={manufacturer.id}\n                                         checked={selectedManufacturer === manufacturer.id}\n                                         onChange={(e) => handleFilterChange('manufacturer', e.target.value)}\n                                         className=\"sr-only\"\n                                       />\n                                       <div className={`w-4 h-4 rounded-full border-2 transition-all duration-200 ${\n                                         selectedManufacturer === manufacturer.id \n                                           ? 'border-primary-600 bg-primary-600' \n                                           : 'border-stone-300 group-hover:border-stone-400'\n                                       }`}>\n                                         {selectedManufacturer === manufacturer.id && (\n                                           <div className=\"w-2 h-2 bg-white rounded-full absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2\"></div>\n                                         )}\n                                       </div>\n                                     </div>\n                                     <span className=\"text-stone-700 group-hover:text-stone-900 transition-colors\">{manufacturer.name}</span>\n                                   </label>\n                                 ))}\n                               </div>\n                               \n                               {relevantManufacturers.length > maxVisibleItems && (\n                                 <button\n                                   onClick={() => setShowAllManufacturers(!showAllManufacturers)}\n                                   className=\"text-sm text-stone-700 hover:text-stone-900 font-medium transition-colors mt-2 underline decoration-stone-300 hover:decoration-stone-600\"\n                                 >\n                                   {showAllManufacturers \n                                     ? `Show Less (${relevantManufacturers.length - maxVisibleItems} fewer)` \n                                     : `Show More (${relevantManufacturers.length - maxVisibleItems} more)`\n                                   }\n                                 </button>\n                               )}\n                             </>\n                           );\n                         })()}\n                       </div>\n                    </div>\n\n                   <div>\n                     <label className=\"block text-base font-semibold text-stone-900 mb-4\">\n                       Sort by Price\n                     </label>\n                     <div className=\"space-y-2\">\n                       <label className=\"flex items-center space-x-3 cursor-pointer group\">\n                         <div className=\"relative\">\n                           <input\n                             type=\"radio\"\n                             name=\"sort\"\n                             value=\"price-low\"\n                             checked={sortBy === 'price-low'}\n                             onChange={(e) => handleFilterChange('sort', e.target.value)}\n                             className=\"sr-only\"\n                           />\n                           <div className={`w-4 h-4 rounded-full border-2 transition-all duration-200 ${\n                             sortBy === 'price-low' \n                               ? 'border-primary-600 bg-primary-600' \n                               : 'border-stone-300 group-hover:border-stone-400'\n                           }`}>\n                             {sortBy === 'price-low' && (\n                               <div className=\"w-2 h-2 bg-white rounded-full absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2\"></div>\n                             )}\n                           </div>\n                         </div>\n                         <span className=\"text-stone-700 group-hover:text-stone-900 transition-colors\">Low to High</span>\n                       </label>\n                       \n                       <label className=\"flex items-center space-x-3 cursor-pointer group\">\n                         <div className=\"relative\">\n                           <input\n                             type=\"radio\"\n                             name=\"sort\"\n                             value=\"price-high\"\n                             checked={sortBy === 'price-high'}\n                             onChange={(e) => handleFilterChange('sort', e.target.value)}\n                             className=\"sr-only\"\n                           />\n                           <div className={`w-4 h-4 rounded-full border-2 transition-all duration-200 ${\n                             sortBy === 'price-high' \n                               ? 'border-primary-600 bg-primary-600' \n                               : 'border-stone-300 group-hover:border-stone-400'\n                           }`}>\n                             {sortBy === 'price-high' && (\n                               <div className=\"w-2 h-2 bg-white rounded-full absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2\"></div>\n                             )}\n                           </div>\n                         </div>\n                         <span className=\"text-stone-700 group-hover:text-stone-900 transition-colors\">High to Low</span>\n                       </label>\n                     </div>\n                   </div>\n                 </div>\n               </div>\n             </div>\n\n                         {/* Products Grid Section */}\n             <div className=\"flex-1 pt-8 pb-16 products-grid\">\n              {sortedProducts.length === 0 ? (\n                <div className=\"text-center py-12\">\n                  <svg className=\"mx-auto h-12 w-12 text-stone-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4\" />\n                  </svg>\n                  <H3 className=\"mt-2\">No products found</H3>\n                  <Body className=\"mt-1 text-stone-500\">\n                    {selectedCategory || selectedManufacturer\n                      ? 'Try adjusting your filters to see more products.'\n                      : 'No products are available at the moment.'\n                    }\n                  </Body>\n                </div>\n              ) : (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-10\">\n                  {sortedProducts.map((product) => (\n                    <Link key={product.id} to={`/products/${product.slug}`} className=\"block h-full\">\n                      <ProductCard\n                        product={product}\n                        showBadges={true}\n                        showPrice={true}\n                        showCategory={!selectedCategory}\n                        className=\"h-full\"\n                      />\n                    </Link>\n                  ))}\n                </div>\n              )}\n            </div>\n          </div>\n        </Container>\n      </Section>\n    </div>\n  );\n};\n\nexport { Products };\n"],"names":["Products","searchParams","setSearchParams","useSearchParams","navigate","useNavigate","useLocation","products","setProducts","useState","categories","setCategories","manufacturers","setManufacturers","loading","setLoading","selectedCategory","setSelectedCategory","selectedManufacturer","setSelectedManufacturer","sortBy","setSortBy","showAllManufacturers","setShowAllManufacturers","showAllCategories","setShowAllCategories","maxVisibleItems","setMaxVisibleItems","user","useAuth","useEffect","calculateMaxItems","availableHeight","maxItems","productsData","categoriesData","manufacturersData","getProductsWithCategories","getProductCategories","getManufacturers","error","categoryFromUrl","manufacturerFromUrl","sortFromUrl","handleFilterChange","type","value","newSearchParams","productsGrid","offsetPosition","filteredProducts","product","sortedProducts","a","b","priceA","priceB","jsx","jsxs","Section","Container","c","Link","Button","e","displayedCategories","Fragment","category","relevantManufacturers","manufacturer","displayedManufacturers","H3","Body","ProductCard"],"mappings":"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"}