{"version":3,"file":"News-tpfjeIfI.js","sources":["../../src/lib/utils.ts","../../src/pages/News.tsx"],"sourcesContent":["/**\r\n * Parse Statamic content format to extract plain text\r\n * Handles JSON arrays with content blocks from Statamic CMS\r\n */\r\nexport const parseStatamicContent = (content: string): string => {\r\n  if (!content) return '';\r\n  \r\n  try {\r\n    // Check if it's JSON format from Statamic\r\n    if (content.startsWith('[') || content.startsWith('{')) {\r\n      const parsed = JSON.parse(content);\r\n      if (Array.isArray(parsed)) {\r\n        // Extract text from Statamic content blocks\r\n        return parsed\r\n          .map((block: any) => {\r\n            if (block.type === 'paragraph' && block.content) {\r\n              return block.content\r\n                .map((item: any) => item.text || '')\r\n                .join('');\r\n            }\r\n            return '';\r\n          })\r\n          .join('\\n')\r\n          .trim();\r\n      }\r\n    }\r\n    return content;\r\n  } catch {\r\n    // If parsing fails, return the original content\r\n    return content;\r\n  }\r\n};\r\n\r\n/**\r\n * Convert a string to a URL-friendly slug\r\n */\r\nexport const slugify = (text: string): string => {\r\n  return text\r\n    .toLowerCase()\r\n    .replace(/[^\\w\\s-]/g, '') // Remove special characters\r\n    .replace(/[\\s_-]+/g, '-') // Replace spaces and underscores with hyphens\r\n    .replace(/^-+|-+$/g, ''); // Remove leading/trailing hyphens\r\n};\r\n\r\n/**\r\n * Format price with proper currency display\r\n */\r\nexport const formatPrice = (price: number): string => {\r\n  return new Intl.NumberFormat('en-US', {\r\n    style: 'currency',\r\n    currency: 'USD',\r\n  }).format(price);\r\n}; ","import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { motion } from 'framer-motion';\r\nimport { getNews, getImageUrl, News as NewsType } from '../lib/supabase';\r\nimport { slugify } from '../lib/utils';\r\nimport { Section, Container, Flex, H1, BodyLarge } from '../components/ui';\r\nimport { NewsCard } from '../components/ui';\r\nimport { getRandomMusicalMessage } from '../utils/musicalLoadingMessages';\r\n\r\nconst News: React.FC = () => {\r\n  const [news, setNews] = useState<NewsType[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    const fetchNews = async () => {\r\n      try {\r\n        const data = await getNews();\r\n        setNews(data);\r\n      } catch (error) {\r\n        console.error('Error fetching news:', error);\r\n        setNews([]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchNews();\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-warm-white flex items-center justify-center\">\r\n        <Container size=\"6xl\">\r\n          <div className=\"text-center\">\r\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-stone-600 mx-auto\"></div>\r\n            <p className=\"mt-4 text-stone-600\">{getRandomMusicalMessage()}</p>\r\n          </div>\r\n        </Container>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0 }}\r\n      animate={{ opacity: 1 }}\r\n      transition={{ duration: 0.5 }}\r\n      className=\"min-h-screen bg-warm-white\"\r\n    >\r\n      {/* Hero Section */}\r\n      <Section variant=\"compact\" className=\"!pt-8 !pb-12\">\r\n        <Container size=\"6xl\">\r\n          <Flex direction=\"col\" align=\"center\" className=\"text-center\">\r\n            <H1 className=\"mb-4\">News & Updates</H1>\r\n            <BodyLarge className=\"text-stone-600 max-w-2xl\">\r\n              Stay up to date with the latest news, product announcements, and industry insights from Fidelis AV.\r\n            </BodyLarge>\r\n          </Flex>\r\n        </Container>\r\n      </Section>\r\n\r\n      {/* News Grid */}\r\n      <Section variant=\"compact\" background=\"custom\" customBackground=\"bg-warm-white\">\r\n        <Container size=\"6xl\">\r\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n            {news.map((article) => {\r\n              const articleSlug = article.slug || slugify(article.title);\r\n              return (\r\n                <Link key={article.id} to={`/news/${articleSlug}`} className=\"block h-full\">\r\n                  <NewsCard article={article} className=\"h-full\" />\r\n                </Link>\r\n              );\r\n            })}\r\n          </div>\r\n        </Container>\r\n      </Section>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport { News }; "],"names":["slugify","text","News","news","setNews","useState","loading","setLoading","useEffect","data","getNews","error","jsx","Container","jsxs","motion","Section","Flex","H1","BodyLarge","article","articleSlug","Link","NewsCard"],"mappings":"uKAoCO,MAAMA,EAAWC,GACfA,EACJ,YAAA,EACA,QAAQ,YAAa,EAAE,EACvB,QAAQ,WAAY,GAAG,EACvB,QAAQ,WAAY,EAAE,EChCrBC,EAAiB,IAAM,CAC3B,KAAM,CAACC,EAAMC,CAAO,EAAIC,EAAAA,SAAqB,CAAA,CAAE,EACzC,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EAiB3C,OAfAG,EAAAA,UAAU,IAAM,EACI,SAAY,CAC5B,GAAI,CACF,MAAMC,EAAO,MAAMC,EAAA,EACnBN,EAAQK,CAAI,CACd,OAASE,EAAO,CACd,QAAQ,MAAM,uBAAwBA,CAAK,EAC3CP,EAAQ,CAAA,CAAE,CACZ,QAAA,CACEG,EAAW,EAAK,CAClB,CACF,GACA,CACF,EAAG,CAAA,CAAE,EAEDD,EAEAM,EAAAA,IAAC,MAAA,CAAI,UAAU,8DACb,SAAAA,EAAAA,IAACC,EAAA,CAAU,KAAK,MACd,SAAAC,EAAAA,KAAC,MAAA,CAAI,UAAU,cACb,SAAA,CAAAF,EAAAA,IAAC,MAAA,CAAI,UAAU,yEAAA,CAA0E,EACzFA,EAAAA,IAAC,IAAA,CAAE,UAAU,sBAAuB,YAAwB,CAAE,CAAA,CAAA,CAChE,EACF,EACF,EAKFE,EAAAA,KAACC,EAAO,IAAP,CACC,QAAS,CAAE,QAAS,CAAA,EACpB,QAAS,CAAE,QAAS,CAAA,EACpB,WAAY,CAAE,SAAU,EAAA,EACxB,UAAU,6BAGV,SAAA,CAAAH,EAAAA,IAACI,GAAQ,QAAQ,UAAU,UAAU,eACnC,eAACH,EAAA,CAAU,KAAK,MACd,SAAAC,EAAAA,KAACG,GAAK,UAAU,MAAM,MAAM,SAAS,UAAU,cAC7C,SAAA,CAAAL,EAAAA,IAACM,EAAA,CAAG,UAAU,OAAO,SAAA,iBAAc,EACnCN,EAAAA,IAACO,EAAA,CAAU,UAAU,2BAA2B,SAAA,qGAAA,CAEhD,CAAA,CAAA,CACF,EACF,EACF,QAGCH,EAAA,CAAQ,QAAQ,UAAU,WAAW,SAAS,iBAAiB,gBAC9D,SAAAJ,EAAAA,IAACC,GAAU,KAAK,MACd,eAAC,MAAA,CAAI,UAAU,wCACZ,SAAAV,EAAK,IAAKiB,GAAY,CACrB,MAAMC,EAAcD,EAAQ,MAAQpB,EAAQoB,EAAQ,KAAK,EACzD,OACER,EAAAA,IAACU,EAAA,CAAsB,GAAI,SAASD,CAAW,GAAI,UAAU,eAC3D,SAAAT,MAACW,GAAS,QAAAH,EAAkB,UAAU,SAAS,CAAA,EADtCA,EAAQ,EAEnB,CAEJ,CAAC,CAAA,CACH,CAAA,CACF,CAAA,CACF,CAAA,CAAA,CAAA,CAGN"}