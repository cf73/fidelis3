import{r as i,j as e,g as M,f as F,k as U,e as Y,S as D,C as L,i as E,M as B,O,h as W,Q as q,R as z,T as G,U as J}from"./index-sDBu8FS9.js";import{b as T,B as Q}from"./Typography-DZld3_jF.js";const V=({product:n,onSave:A,onCancel:H})=>{const[o,I]=i.useState({title:n.title||"",content:n.content||"",specs:n.specs||"",price:n.price||0,show_price:n.show_price??!0,available_for_demo:n.available_for_demo??!0,available_to_buy_online:n.available_to_buy_online??!0,published:n.published??!0,pairs_well_with:n.pairs_well_with||[],also_consider:n.also_consider||[]}),[f,u]=i.useState([]),[R,_]=i.useState([]),[j,k]=i.useState([]),[v,N]=i.useState(!1),[h,C]=i.useState("basic");i.useEffect(()=>{if(n.reivews_set){if(Array.isArray(n.reivews_set))u(n.reivews_set);else if(typeof n.reivews_set=="string")try{const t=JSON.parse(n.reivews_set);u(Array.isArray(t)?t:[])}catch{u([])}}},[n.reivews_set]),i.useEffect(()=>{(async()=>{const[a,r]=await Promise.all([M(),F()]);_(a),k(r)})()},[]);const l=(t,a)=>{I(r=>({...r,[t]:a}))},w=()=>{const t={excerpt:"",attribution:"",link:"",date_of_review:new Date().toISOString().split("T")[0]};u(a=>[...a,t])},d=(t,a,r)=>{u(c=>c.map((p,S)=>S===t?{...p,[a]:r}:p))},y=t=>{u(a=>a.filter((r,c)=>c!==t))},g=async()=>{N(!0);try{const t={...o,reivews_set:f};await U(n.id,t),A()}catch(t){console.error("Error saving product:",t)}finally{N(!1)}},P=[{id:"basic",label:"Basic Info",icon:"📋"},{id:"description",label:"Description",icon:"📝"},{id:"specs",label:"Specifications",icon:"⚙️"},{id:"reviews",label:"Reviews",icon:"⭐"},{id:"relationships",label:"Relationships",icon:"🔗"}];return e.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-stone-200 overflow-hidden",children:[e.jsx("div",{className:"border-b border-stone-200 bg-gradient-to-r from-stone-50 to-stone-100",children:e.jsx("nav",{className:"flex","aria-label":"Tabs",children:P.map(t=>e.jsxs("button",{onClick:()=>C(t.id),className:`flex-1 flex items-center justify-center space-x-2 py-4 px-4 font-medium text-sm transition-all duration-300 ${h===t.id?"text-stone-900 bg-white border-b-2 border-stone-900 shadow-sm":"text-stone-600 hover:text-stone-800 hover:bg-stone-50"}`,children:[e.jsx("span",{children:t.icon}),e.jsx("span",{children:t.label})]},t.id))})}),e.jsxs("div",{className:"p-8 lg:p-12",children:[h==="basic"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-2",children:"Product Title"}),e.jsx("input",{type:"text",value:o.title,onChange:t=>l("title",t.target.value),className:"w-full border border-stone-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-stone-500 focus:border-transparent"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-2",children:"Price"}),e.jsx("input",{type:"number",value:o.price,onChange:t=>l("price",parseInt(t.target.value)||0),className:"w-full border border-stone-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-stone-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-2",children:"Category"}),e.jsx("div",{className:"text-sm text-stone-600 py-3",children:n.categories?.name||"No category assigned"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-2",children:"Manufacturer"}),e.jsx("div",{className:"text-sm text-stone-600 py-3",children:n.manufacturer?.name||"No manufacturer assigned"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:o.show_price,onChange:t=>l("show_price",t.target.checked),className:"rounded border-stone-300 text-stone-600 focus:ring-stone-500"}),e.jsx("span",{className:"text-sm font-medium text-stone-700",children:"Show Price"})]}),e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:o.available_for_demo,onChange:t=>l("available_for_demo",t.target.checked),className:"rounded border-stone-300 text-stone-600 focus:ring-stone-500"}),e.jsx("span",{className:"text-sm font-medium text-stone-700",children:"Available for Demo"})]}),e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:o.available_to_buy_online,onChange:t=>l("available_to_buy_online",t.target.checked),className:"rounded border-stone-300 text-stone-600 focus:ring-stone-500"}),e.jsx("span",{className:"text-sm font-medium text-stone-700",children:"Available Online"})]})]}),e.jsxs("label",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"checkbox",checked:o.published,onChange:t=>l("published",t.target.checked),className:"rounded border-stone-300 text-stone-600 focus:ring-stone-500"}),e.jsx("span",{className:"text-sm font-medium text-stone-700",children:"Published"})]})]}),h==="description"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-2",children:"Product Description"}),e.jsx("textarea",{value:o.content,onChange:t=>l("content",t.target.value),rows:12,className:"w-full border border-stone-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-stone-500 focus:border-transparent",placeholder:"Enter the product description. You can use HTML tags for formatting."}),e.jsx("p",{className:"text-sm text-stone-500 mt-2",children:"You can use HTML tags like <p>, <h2>, <h3>, <strong>, <em>, <ul>, <li> for formatting."})]}),h==="specs"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-2",children:"Technical Specifications"}),e.jsx("textarea",{value:o.specs,onChange:t=>l("specs",t.target.value),rows:12,className:"w-full border border-stone-300 rounded-lg px-4 py-3 focus:ring-2 focus:ring-stone-500 focus:border-transparent",placeholder:"Enter the technical specifications. You can use HTML tags for formatting."}),e.jsx("p",{className:"text-sm text-stone-500 mt-2",children:"You can use HTML tags like <p>, <h2>, <h3>, <strong>, <em>, <ul>, <li> for formatting."})]}),h==="reviews"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-medium text-stone-900",children:"Product Reviews"}),e.jsx("button",{onClick:w,className:"inline-flex items-center px-4 py-2 bg-stone-800 text-white rounded-lg hover:bg-stone-900 transition-colors duration-200 text-sm font-medium",children:e.jsx("span",{children:"Add Review"})})]}),f.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-stone-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-2xl",children:"⭐"})}),e.jsx("h3",{className:"text-xl font-medium text-stone-900 mb-2",children:"No Reviews Yet"}),e.jsx("p",{className:"text-stone-600",children:"Add the first review for this product."})]}):e.jsx("div",{className:"space-y-6",children:f.map((t,a)=>e.jsxs("div",{className:"border border-stone-200 rounded-xl p-6 bg-stone-50",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("h4",{className:"text-lg font-medium text-stone-900",children:["Review ",a+1]}),e.jsx("button",{onClick:()=>y(a),className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Remove"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-2",children:"Attribution"}),e.jsx("input",{type:"text",value:t.attribution||"",onChange:r=>d(a,"attribution",r.target.value),className:"w-full border border-stone-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-stone-500 focus:border-transparent",placeholder:"Reviewer name or publication"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-2",children:"Date"}),e.jsx("input",{type:"date",value:t.date_of_review||"",onChange:r=>d(a,"date_of_review",r.target.value),className:"w-full border border-stone-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-stone-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-2",children:"Review Link (Optional)"}),e.jsx("input",{type:"url",value:t.link||"",onChange:r=>d(a,"link",r.target.value),className:"w-full border border-stone-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-stone-500 focus:border-transparent",placeholder:"https://..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-stone-700 mb-2",children:"Review Excerpt"}),e.jsx("textarea",{value:t.excerpt||"",onChange:r=>d(a,"excerpt",r.target.value),rows:6,className:"w-full border border-stone-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-stone-500 focus:border-transparent",placeholder:"Enter the review excerpt. You can use HTML tags for formatting."}),e.jsx("p",{className:"text-sm text-stone-500 mt-2",children:"You can use HTML tags like <p>, <strong>, <em> for formatting."})]})]},a))})]}),h==="relationships"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h3",{className:"text-2xl font-light text-stone-900 mb-2",children:"Product Relationships"}),e.jsx("p",{className:"text-stone-600",children:"Manage which products this item pairs well with and alternatives to consider."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-stone-50 rounded-2xl p-6 border border-stone-200",children:[e.jsx("h4",{className:"text-lg font-medium text-stone-900 mb-4",children:"Pairs Well With"}),e.jsx("p",{className:"text-sm text-stone-600 mb-4",children:"Choose products from other categories that work well with this item."}),e.jsxs("div",{className:"space-y-3",children:[o.pairs_well_with.map((t,a)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"text",value:t,onChange:r=>{const c=[...o.pairs_well_with];c[a]=r.target.value,l("pairs_well_with",c)},className:"flex-1 border border-stone-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-stone-500 focus:border-transparent",placeholder:"Product ID"}),e.jsx("button",{onClick:()=>{const r=o.pairs_well_with.filter((c,p)=>p!==a);l("pairs_well_with",r)},className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Remove"})]},a)),e.jsx("button",{onClick:()=>{const t=[...o.pairs_well_with,""];l("pairs_well_with",t)},className:"w-full px-4 py-2 border border-stone-300 text-stone-700 rounded-lg hover:bg-stone-100 transition-colors duration-200 text-sm font-medium",children:"Add Product ID"})]})]}),e.jsxs("div",{className:"bg-stone-50 rounded-2xl p-6 border border-stone-200",children:[e.jsx("h4",{className:"text-lg font-medium text-stone-900 mb-4",children:"Also Consider"}),e.jsx("p",{className:"text-sm text-stone-600 mb-4",children:"Choose alternative products in the same category and price range."}),e.jsxs("div",{className:"space-y-3",children:[o.also_consider.map((t,a)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"text",value:t,onChange:r=>{const c=[...o.also_consider];c[a]=r.target.value,l("also_consider",c)},className:"flex-1 border border-stone-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-stone-500 focus:border-transparent",placeholder:"Product ID"}),e.jsx("button",{onClick:()=>{const r=o.also_consider.filter((c,p)=>p!==a);l("also_consider",r)},className:"text-red-600 hover:text-red-800 text-sm font-medium",children:"Remove"})]},a)),e.jsx("button",{onClick:()=>{const t=[...o.also_consider,""];l("also_consider",t)},className:"w-full px-4 py-2 border border-stone-300 text-stone-700 rounded-lg hover:bg-stone-100 transition-colors duration-200 text-sm font-medium",children:"Add Product ID"})]})]})]})]})]}),e.jsxs("div",{className:"border-t border-stone-200 bg-stone-50 px-8 py-6 flex justify-end space-x-4",children:[e.jsx("button",{onClick:H,className:"px-6 py-3 border border-stone-300 text-stone-700 rounded-lg hover:bg-stone-100 transition-colors duration-200 font-medium",children:"Cancel"}),e.jsx("button",{onClick:g,disabled:v,className:"px-6 py-3 bg-stone-800 text-white rounded-lg hover:bg-stone-900 transition-colors duration-200 font-medium disabled:opacity-50",children:v?"Saving...":"Save Changes"})]})]})},Z=()=>{const{user:n}=Y(),[A,H]=i.useState([]),[o,I]=i.useState([]),[f,u]=i.useState([]),[R,_]=i.useState(!1),[j,k]=i.useState(null),[v,N]=i.useState(""),[h,C]=i.useState(""),[l,w]=i.useState(null),[d,y]=i.useState("hero"),g=async()=>{const s=await B();H(s)},P=async()=>{const s=await O();I(s)},t=async()=>{const s=await M();u(s)};i.useEffect(()=>{g(),P(),t()},[]);const a=async()=>{if(j){_(!0);try{const s=`${Date.now()}-${j.name}`,{error:b}=await W(j,s);if(b)throw b;const{error:m}=await q({image:s,alt_text:v||null,credit:h||null,published:!0});if(m)throw m;k(null),N(""),C(""),await g()}catch(s){console.error("Upload failed",s)}finally{_(!1)}}},r=async s=>{await z(s.id,{published:!s.published}),await g()},c=async s=>{await G(s),await g()},p=()=>{w(null),P()},S=()=>{w(null)},$=async(s,b)=>{try{await J(s,b),await t()}catch(m){console.error("Failed to update category hero product",m)}};return n?l?e.jsx(D,{variant:"default",background:"white",children:e.jsxs(L,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:S,className:"inline-flex items-center space-x-2 text-stone-600 hover:text-stone-800 mb-4",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),e.jsx("span",{children:"Back to Admin"})]}),e.jsxs(T,{children:["Edit Product: ",l.title]})]}),e.jsx(V,{product:l,onSave:p,onCancel:S})]})}):e.jsx(D,{variant:"default",background:"white",children:e.jsxs(L,{children:[e.jsx(T,{className:"mb-6",children:"Admin"}),e.jsx("div",{className:"border-b border-stone-200 mb-8",children:e.jsxs("nav",{className:"flex space-x-8",children:[e.jsx("button",{onClick:()=>y("hero"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${d==="hero"?"border-stone-900 text-stone-900":"border-transparent text-stone-500 hover:text-stone-700 hover:border-stone-300"}`,children:"Hero Images"}),e.jsx("button",{onClick:()=>y("categories"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${d==="categories"?"border-stone-900 text-stone-900":"border-transparent text-stone-500 hover:text-stone-700 hover:border-stone-300"}`,children:"Categories"}),e.jsx("button",{onClick:()=>y("products"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200 ${d==="products"?"border-stone-900 text-stone-900":"border-transparent text-stone-500 hover:text-stone-700 hover:border-stone-300"}`,children:"Products"})]})}),d==="hero"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-10 p-6 border rounded-xl",children:[e.jsx("h2",{className:"text-xl font-medium mb-4",children:"Upload Hero Image"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-stone-600 mb-2",children:"File"}),e.jsx("input",{type:"file",accept:"image/*",onChange:s=>k(s.target.files?.[0]||null)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-stone-600 mb-2",children:"Alt text"}),e.jsx("input",{className:"w-full border rounded-md px-3 py-2",value:v,onChange:s=>N(s.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-stone-600 mb-2",children:"Credit"}),e.jsx("input",{className:"w-full border rounded-md px-3 py-2",value:h,onChange:s=>C(s.target.value)})]}),e.jsx("div",{children:e.jsx("button",{onClick:a,disabled:R||!j,className:"btn-primary disabled:opacity-50",children:R?"Uploading…":"Upload"})})]})]}),e.jsx("h2",{className:"text-xl font-medium mb-4",children:"Home Hero Images"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:A.map(s=>e.jsxs("div",{className:"border rounded-xl overflow-hidden",children:[e.jsx("div",{className:"aspect-[16/9] bg-stone-100",children:s.image&&e.jsx("img",{src:E(s.image),alt:s.alt_text||"",className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"p-4 space-y-2",children:[e.jsx("div",{className:"text-sm text-stone-700 line-clamp-1",children:s.alt_text}),e.jsx("div",{className:"text-xs text-stone-500 line-clamp-1",children:s.credit}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx("button",{onClick:()=>r(s),className:"btn-secondary",children:s.published?"Unpublish":"Publish"}),e.jsx("button",{onClick:()=>c(s.id),className:"btn-secondary",children:"Delete"})]})]})]},s.id))})]}),d==="categories"&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-xl font-medium mb-6",children:"Category Hero Products"}),e.jsx("p",{className:"text-stone-600 mb-8",children:"Select which product's hero image to use for each category. This will override the automatic selection."}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(s=>{const b=o.filter(x=>x.categories?.id===s.id&&x.product_hero_image),m=b.find(x=>x.id===s.hero_product_id);return e.jsxs("div",{className:"border rounded-xl overflow-hidden bg-white shadow-sm",children:[e.jsx("div",{className:"aspect-[16/9] bg-stone-100",children:m?.product_hero_image?e.jsx("img",{src:E(m.product_hero_image),alt:m.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-stone-400",children:e.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-stone-900",children:s.name}),e.jsxs("p",{className:"text-sm text-stone-500",children:[b.length," products with images"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-stone-600 mb-2",children:"Select Hero Product"}),e.jsxs("select",{value:s.hero_product_id||"",onChange:x=>$(s.id,x.target.value||null),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Auto-select (first product)"}),b.map(x=>e.jsx("option",{value:x.id,children:x.title},x.id))]})]}),m&&e.jsxs("div",{className:"text-xs text-stone-500 bg-stone-50 p-2 rounded",children:["Currently showing: ",e.jsx("strong",{children:m.title})]})]})]})]},s.id)})})]}),d==="products"&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-xl font-medium mb-4",children:"Product Management"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(s=>e.jsxs("div",{className:"border rounded-xl overflow-hidden bg-white shadow-sm",children:[e.jsx("div",{className:"aspect-[16/9] bg-stone-100",children:s.product_hero_image&&e.jsx("img",{src:`https://myrdvcihcqphixvunvkv.supabase.co/storage/v1/object/public/images/${s.product_hero_image}`,alt:s.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-stone-900 line-clamp-2",children:s.title}),e.jsxs("p",{className:"text-sm text-stone-500",children:[s.manufacturer?.name," • ",s.categories?.name]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.published?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:s.published?"Published":"Draft"}),s.show_price&&s.price&&e.jsxs("span",{className:"text-stone-700 font-medium",children:["$",s.price.toLocaleString()]})]}),e.jsx("div",{className:"flex gap-2 pt-2",children:e.jsx("button",{onClick:()=>w(s),className:"flex-1 btn-primary text-sm",children:"Edit"})})]})]},s.id))})]})]})}):e.jsx(D,{variant:"default",background:"white",children:e.jsxs(L,{children:[e.jsx(T,{className:"mb-4",children:"Admin"}),e.jsx(Q,{children:"Please sign in to access the admin tools."})]})})};export{Z as default};
//# sourceMappingURL=Admin--LaYgiZe.js.map
